{
"ja": {
"全般":{
"data":{"frequently":"","abbreviation":"","icon":"fa-sticky-note","id":"general"},
"1":{"Q":"禁止拡張子となっている、phpファイル/シェルファイル/exeファイルなどをアップロードして管理したい","A":"ITAにアップロードできる拡張子は、デフォルトでは「.exe」「.com」「.php」「.cgi」「.sh」「.sql」「.vbs」「.js」「.pl」「.ini」「.htaccess」が禁止されています。\n「管理コンソール」＞「システム設定」　から設定を変更することが可能です。\nただし、セキュリティホールになる可能性があることをご了承の上、設定変更をお願い致します。"},
"2":{"Q":"ITAの保守サービスはある？","A":"ITAはOSS（Open Source Software）のため、開発コミュニティには保守サービスはありません。\n\nNECがOSS保守サポートサービスを展開しています。\n『{a{https://www.support.nec.co.jp/View.aspx?NoClear=on&id=3030100331}NECサポートポータル Exastro IT Automation 導入支援サポート・保守サポートご紹介}』"},
"3":{"Q":"既存プロジェクトで使っている帳票(Excel形式)を、Exastro IT AutomationのCMDB(パラメータシート)にインポートすることはできるのか？","A":"ITAでアップロード/ダウンロードするExcelのフォーマットは決まっているため、残念ながら既存プロジェクトで使っているExcelをそのままアップロード/ダウンロードすることはできません。\nITAの提供するフォーマットに書き換えて頂く必要があります。\n\n代替手段として、ITAに具備されているマシンインタフェース(Rest API）機能を利用して、既存プロジェクトで使っているExcelをVBAでコーディングし、情報を同期する方法もあります。\nREST-APIについて、詳しくは{ank{#general-q13}こちら}をご参照ください。"},
"4":{"Q":"CPUとメモリを増設したのに、性能が上がりません。","A":"マシンスペックに合わせて、設定値もチューニングして頂く必要があります。\nチューニングの参考値について、{a{https://exastro-suite.github.io/it-automation-docs/asset/Documents_ja/Exastro-ITA_%E3%80%90%E5%8F%82%E8%80%83%E3%80%91%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E6%99%82%E3%81%AE%E5%90%84%E3%82%B3%E3%83%B3%E3%83%95%E3%82%A3%E3%82%B0%E8%A8%AD%E5%AE%9A%E5%80%A4.pdf}こちらの資料}をご参照ください。"},
"5":{"Q":"ITAと監視ソフトウェア（Zabbixなど）の違いと、連携時の役割分担は？","A":"Exastroはシステム構築や運用を効率化することを目的としたソフトウェアです。そのためZabbixなどの監視ソフトウェアとは異なり、ネットワーク機器の監視やアラームなどの機能は搭載しておりません。\n\n監視ソフトウェアとExastroを連携してご利用いただくことは可能です。\n連携のしかたは下図のように、監視ソフトウェアからの障害メッセージをExastro OASEが受け取り、内容をルールリストと照合して既知事象の場合はExastro ITAにフィードバックし、ワークアラウンドを実行するという形になります。\n{img{asset/faq/general_003.jpg}100%}"},
"6":{"Q":"ITAとAnsible、Terraformの違いと、連携時の役割分担は？","A":"AnsibleとTerraformの違いは以下になります。\n\nAnsibleは命令型IaC（手続き的）の構成管理ツールです。\nソフトウェアのインストールやアプリの設定などOS上での構成管理を主体としており、手順を確実に順序よく実行することに優れています。\n\nTerraformはインフラストラクチャの構築を効率化する、宣言型IaC（宣言的API）のオーケストレーションツールです。\n例えばAWS上にEC2を作成するなど、VMを含むインフラリソースをプロビジョニングすることを主としています。\n{img{asset/faq/general_001.jpg}50%}\n\nAnsibleとTerraformを連携した使い方としては、Terraformでサーバを構築しAnsibleでアプリデプロイを行うといった形が想定されます。\n\nなお、ITAはTerraformとAnsibleのどちらに対してもシステムパラメータから情報を送り込むことができ（※）、自動化ソフトウェアにとらわれずにシステムの情報を一元管理することができます。\n{img{asset/faq/general_002.jpg}100%}"},
"7":{"Q":"Exastro開発コミュニティに、コミッターとして参加したい。","A":"exastro-suiteのGithubからご参加いただけます。\n\nまずは問題点、要望などを、issuesに上げてください。\n下記ページより「New issue」ボタンを押すと新規作成できます。\n・{a{https://github.com/exastro-suite/it-automation-docs/issues}ドキュメントの場合}\n・{a{https://github.com/exastro-suite/it-automation/issues}コードの場合}\n\nissue内で議論したのち、コード修正を行う場合はissueに紐づけて対象ファイルにプルリクエストを行って下さい。\nその際、必ずmasterではなく最新のバージョンのブランチに対して、プルリクエストの実施をお願い致します。"},
"8":{"Q":"どうやってシングルサインオンできるの？\nOAuth2だけ？SAMLには対応している？","A":"SSOの認証方式はOAuth2のみで、SAML認証に対応しておりません。\n\nSSOについての詳細は{a{https://exastro-suite.github.io/it-automation-docs/asset/Documents_ja/Exastro-ITA_%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E6%A7%8B%E6%88%90%EF%BC%8F%E8%A8%AD%E5%AE%9A%E3%82%AC%E3%82%A4%E3%83%89_SSO%EF%BC%88%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%82%B5%E3%82%A4%E3%83%B3%E3%82%AA%E3%83%B3%EF%BC%89%E7%B7%A8.pdf}こちら}"},
"9":{"Q":"【v1.4.1以前】SSL通信時に事前アップロードで128kbyte以上のファイルアップロードが処理中のままとなる。回避方法が知りたい。","A":"vhost設定ファイル（/etc/httpd/conf.d/vhosts_exastro-it-automation.conf ）の「<VirtualHost *:443 >」設定において、下記2点のいずれかの対応によりアップロードサイズを変更できます。\n\n①SSLRenegBufferSize 設定する（例：SSLRenegBufferSize 4000000000）\n②SSLCipherSuite を削除する（SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5:!SEED:!IDEA）"},
"10":{"Q":"Exastro IT Automationへのhttpアクセスを廃止し、httpsのみを許可する方法が知りたい。","A":"HTTPまたはHTTPSアクセスを制限する場合は、以下の手順を実施してください。\n\n①ファイル「/etc/httpd/conf.d/vhosts_exastro-it-automation.conf」を編集する。\n　・HTTPを制限する場合は、「<VirtualHost *:80 >」から「</VirtualHost>」をコメントアウト(#)をする。\n　・HTTPSを制限する場合は、「<VirtualHost *:443 >」から「</VirtualHost>」をコメントアウト(#)をする。\n\n②Apacheを再起動する。\n\n詳しくは{a{https://exastro-suite.github.io/it-automation-docs/asset/Learn_ja/ITA-online-install_ja.pdf}こちら}の29ページ"},
"11":{"Q":"Exastro IT Automationを使いこなすには、どんな学習をしたらいい？","A":"コミュニティサイトの{a{https://exastro-suite.github.io/it-automation-docs/learn_ja.html}Learnのページ}に、学習資料を掲載しております。\nまた、{a{https://exastro-suite.github.io/it-automation-docs/webinar_ja.html}Webinar}ページに、デモの動画や資料がございます。\n講演の情報については、{a{https://exastro-suite.github.io/docs/newsroom_ja.html}ニュースルーム}をご確認ください。\n各種機能の詳細を知りたい方は、{a{https://exastro-suite.github.io/it-automation-docs/documents_ja.html}Documents}をご覧ください。\n\nまた、ITAのインストール直後は、PlaybookやMovementなどの情報が何も入っていない状態です。\n{a{https://exastro-suite.github.io/it-automation-docs/setting-samples_ja.html}Setting samples}では、クラウドシステムとの連携やCMDBとしての活用を簡単に開始できるテンプレート（パッケージファイル）を提供しておりますので、ご活用ください。"},
"12":{"Q":"https通信時の事前アップロード処理でデータサイズが128KBを超えた場合に処理中で固まる。","A":"Apacheのvhosts_exastro-it-automation.conf のSSLCipherSuiteを設定かつSSLRenegBufferSizeが未設定の場合に本事象が発生します。\nこれらが未設定の場合、Apacche mod_sslのデフォルト値(128kByte)が適用されているためエラーになります。\nITAバージョンがv1.5.0以上ではデフォルト値が使われていないため発生しません。\n\nこの問題の回避策は、vhosts設定ファイルの「<VirtualHost *:443 >」設定において、\n下記2点のいずれかの方法で、アップロードサイズを変更して下さい。\n\n対象ファイル：/etc/httpd/conf.d/vhosts_exastro-it-automation.conf\n①SSLRenegBufferSize 設定する（例：SSLRenegBufferSize 4000000000）\n②SSLCipherSuite を削除する（SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5:!SEED:!IDEA）"},
"13":{"Q":"Exastro IT Automationのマシンインタフェース(Rest API)にアクセスするサンプルコードを教えてほしい。","A":"サンプルコードは以下よりダウンロードいただけます。\n\nVBA版は{a{https://github.com/exastro-suite/knowledges/blob/main/Exastro_IT_Automation%E3%82%92Excel%E3%81%8B%E3%82%89API%E3%81%A7%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8B%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB(VBA).zip}こちら}\nシェル版は{a{https://github.com/exastro-suite/knowledges/blob/main/RESTAPI%E3%82%B7%E3%82%A7%E3%83%AB.zip}こちら}\n\nAnsible Playbook版は{ank{#ansible-q20}こちら}を参照してください。"},
"14":{"Q":"ITAの推奨ブラウザは何ですか？","A":"ドキュメント『{a{https://exastro-suite.github.io/it-automation-docs/asset/Documents_ja/Exastro-ITA_%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E6%A7%8B%E6%88%90%EF%BC%8F%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89%E3%82%AC%E3%82%A4%E3%83%89_%E5%9F%BA%E6%9C%AC%E7%B7%A8.pdf}Exastro-ITA_システム構成／環境構築ガイド_基本編}』の「クライアント動作要件」の章に記載しておりますのでご確認ください。"},
"15":{"Q":"各バージョンのリリースノートを知りたい。","A":"{a{https://github.com/exastro-suite/it-automation/blob/master/CHANGELOG.md}CHANGELOG.md}をご確認ください。\nCHANGELOGはissueに紐づいており、各issueの詳細ページをご覧いただければ詳しい対応内容をご確認いただけます。\n\n▼issue\nhttps://github.com/exastro-suite/it-automation/issues/xxx（←xxxのところをissue番号にしてください）"}
},
"インストール":{
"data":{"frequently":"","abbreviation":"","icon":"fa-download","id":"install"},
"1":{"Q":"MariaDB以外のRDBMSは使える？","A":"MariaDB10.3以上が動作対象となります。それ以外のDBは動作保証外となります。"},
"2":{"Q":"バージョンアップはできるの？\n制約は？動かなくなったりする機能はある？","A":"ITA v1.4.0以降の場合、バージョンアップすることができます。\nまた、オールインワン構成でインストールされているITA環境に対して実施可能です。\nバージョンアップの手順は{a{https://exastro-suite.github.io/it-automation-docs/asset/Learn_ja/ITA-version-up_ja.pdf}こちら}をご参考下さい。"},
"3":{"Q":"ITAのオールインワン構成のDockerコンテナは、KubernetesのオートスケールやHA構成などに対応できるか？","A":"オールインワン構成のExastro IT Automationのコンテナイメージは、Kubernetesのオートスケールに対応していないため、レプリカ数は1に固定してご利用ください。\nレプリカ数を2以上にした場合は各Pod内にMariaDBが起動しますが、これらのMariaDBは連携していないため、データベースに不整合が発生します。\n\nまた、HA構成を構築する場合は、MariaDBやデータリレイストレージ等の構成要素を個別のコンテナに分離する必要がありますが、現時点では分離した個別のコンテナは準備しておりません。\n\nオートスケールやHA構成に対応したコンテナイメージのリリースは、現在計画中です。"}
},
"管理コンソール":{
"data":{"frequently":"","abbreviation":"","icon":"fa-user-cog","id":"management"},
"1":{"Q":"RBACの設定の単位は？","A":"v1.6.0以降は、「メニュー単位のRBAC」「レコード単位のRBAC」の2パターンで設定が可能です。\n\nメニューに対してRBACを設定すると、メニュー全体への設定となります。\nメニュー内の各レコードでRBACを分けたい場合は、レコード単位での設定となります。\n\nレコード単位のRBACの詳細については{a{https://exastro-suite.github.io/it-automation-docs/asset/Documents_ja/Exastro-ITA_%E5%88%A9%E7%94%A8%E6%89%8B%E9%A0%86%E3%83%9E%E3%83%8B%E3%83%A5%E3%82%A2%E3%83%AB_%E3%83%87%E3%83%BC%E3%82%BF%E3%83%AC%E3%82%B3%E3%83%BC%E3%83%89%E6%AF%8E%E3%81%AE%E3%83%AD%E3%83%BC%E3%83%AB%E3%83%99%E3%83%BC%E3%82%B9%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E5%88%B6%E5%BE%A1.pdf}こちら}になります。"}
},
"エクスポート/インポート":{
"data":{"frequently":"","abbreviation":"","icon":"fa-exchange-alt","id":"export-inport"},
"1":{"Q":"ITAのエクスポート/インポート機能を、異なるバージョン間で使えるか？","A":"ITAのエクスポート/インポート機能において、異なるバージョン間では互換性がありません。\n異なるバージョンにインポートしたい場合は、いったん、インポート元のITAと同じバージョンのインポート先ITAをご用意いただき、データ移行後に、インポート先のITAをバージョンアップしてください。\n\nバージョンアップの手順は{a{https://exastro-suite.github.io/it-automation-docs/asset/Learn_ja/ITA-version-up_ja.pdf}こちら}\n\n※ただしバージョンアップを提供しているのはv1.5.0以降で、上げる対象はv1.4.0以降となります。"}
},
"Conductor/Symphony":{
"data":{"frequently":"","abbreviation":"","icon":"fa-random","id":"conductor-symphony"},
"1":{"Q":"SymphonyとConductorの違いは何？","A":"Symphonyは複数のMovementを組み合わせてジョブフローを作成し、順に実行させる機能です。\nConductorはSymphonyの後継版として、Symphonyに加えて以下が可能です。\n　・条件分岐：実行結果によって、以降の処理を分岐させることができます。\n　・並列実行：複数のMovementを同時実行できます。同時実行数は性能によって変わります。\n　・Conductorの呼び出し：別のConductorの呼び出しが可能です。\n　・処理の待ち合わせ：並列しているMovement等がすべて終了したら次の処理に進む、という制御が可能です。"},
"2":{"Q":"Symphony/Conductorとオペレーション、ってなに？","A":"ITAでは、以下のように用語を定義しています。\n\n・Movement：ITAで作成できる自動作業の最小単位。ジョブ。\n・Symphony/Conductor：1つ以上のMovementの組み合わせから成るジョブフロー。ひとつのMovementが実行完了したら自動的に次のMovementを実行する、汎用手順書のようなものです。\nなお、SymphonyとConductorの違いはFAQ「Conductor/Symphony」Q1の通りです。\n{img{asset/faq/conductor_symphony_001.jpg}67%}\n・オペレーション：ITAで作成できる自動作業一式を指します。オペレーション名を登録し、その作業で使用するSymphony/Conductorや作業対象機器など、関連するすべての情報を紐づけて管理します。\n\n【補足】\nSymphony/Conductorは、一度作成すれば異なるオペレーションで何度でも使い回しができます。\n（例）\n「クリスマス対応」「正月対応」という2つのオペレーションにおいて、同一のSymphonyを使用する場合\n{img{asset/faq/conductor_symphony_002.jpg}100%}"},
"3":{"Q":"Symphonyの、Movement間でのデータの受け渡し方法が知りたい","A":"Ansible及びAnsible-Towerでは、Playbook内でSymphony作業ディレクトリパス配下にファイルを作成することで、各Movement間でファイルを共有することができます。\nまた、Playbook内では作業ディレクトリパスをITA予約変数「__symphony_workflowdir__」として扱うことができます。\n実際の作業ディレクトリパスは、「Symphony」メニューグループー「Symphonyインターフェース情報」から参照してください。\n{img{asset/faq/condcutor_001.PNG}70%}\n\n以下はAnsible Legacyにおけるサンプルコードです。\n\n[渡す側]\n__{code{- name: API実行\n  uri: \n    url: http://sample.com/\n    method: GET\n    status_code: 201\n  register: result\n  ignore_errors: yes\n\n- name: データ書き出し\n  local_action: \n    module: copy\n    dest: \"{{__symphony_workflowdir__}}/data\"\n    content: \"{{ result.content }}\"}playbook}__\n\n[受け取る側]\n__{code{- name: データ読込\n  shell: \n    cat \"{{ __symphony_workflowdir__}}/data\"\n  register: data\n\n- debug: var=data}playbook}__"},
"4":{"Q":"Conductorの、Movement間でのデータの受け渡し方法が知りたい。","A":"Ansible及びAnsible-Towerでは、Playbook内でConductor作業ディレクトリパス配下にファイルを作成することで、各Movement間でファイルを共有することができます。\nまた、Playbook内では作業ディレクトリパスをITA予約変数「__conductor_workflowdir__」として扱うことができます。\n実際の作業ディレクトリパスは、「Conductor」メニューグループ「Conductorインターフェース情報」から参照してください。\n{img{asset/faq/symphony_001.PNG}70%}\n\n以下はAnsible Legacyにおけるサンプルコードです。\n\n[渡す側]\n__{code{- name: API実行\n  uri: \n    url: http://sample.com/\n    method: GET\n    status_code: 201\n  register: result\n  ignore_errors: yes\n\n- name: データ書き出し\n  local_action: \n    module: copy\n    dest: \"{{__conductor_workflowdir__}}/data\"\n    content: \"{{ result.content }}\"}playbook}__\n\n[受け取る側]\n__{code{- name: データ読込\n  shell: \n    cat \"{{ __conductor_workflowdir__}}/data\"\n  register: data\n\n- debug: var=data}playbook}__"}
},
"メニュー作成":{
"data":{"frequently":"","abbreviation":"","icon":"fa-list","id":"create-menu"},
"1":{"Q":"メニュー作成時に以下のメッセージが出力されるが、何を修正すればいい？\n\n【縦メニュー作成情報の項目数と繰り返し数が不正です。】","A":"メニュー作成 -> メニュー項目作成情報で登録している情報と\nメニュー作成 -> メニュー(縦)作成情報のメニュー名:開始項目名、項目数、繰り返し数で定義している情報を比較し、定義が誤っていないか確認してください。"},
"2":{"Q":"パラメータシートとデータシートの違いは何？","A":"パラメータシート・データシートともに、メニュー作成機能にて、項目数や形式・サイズ・入力制限などを自由に設計することが可能です。\n\nパラメータシートはIaCの変数値を管理することができます。\nパラメータシートのレコードは、「オペレーション」または「オペレーションとホスト」単位で作成されます。\nパラメータシートで作成した項目は、各ドライバの「代入値自動登録設定」メニューにて、IaC変数との紐付けをを設定しておくことで、入力された値を IaC変数に自動で代入することが可能です。 \n\nデータシートは、ITA上で情報を管理する場合に利用できます。\nまた、他のパラメータシートやデータシートのプルダウンで選択する項目の参照元として利用することで、文言の揺れなどを防ぐことが可能です。\n\n{img{asset/faq/create_menu_001.jpg}67%}"},
"3":{"Q":"メニュー作成　＞　メニュー定義/作成　で項目を定義する際、入力方式を「プルダウン選択」にしたが、「選択項目」にプルダウン選択の対象となる項目が表示されない。","A":"問題原因として下記が考えられますので、設定をご確認ください。\n\n・参照元の項目定義で「必須」「一意制約」が選択されているか\n下図のように参照先となるメニューがA、参照元となるメニューがBだとすると、メニューAの「選択項目」にメニューBの項目Xを表示させたい場合、メニューBの項目Xの定義において「必須」「一意制約」が選択されている必要があります。\n{img{asset/faq/create_menu_002.png}70%}\n\n・参照元の項目定義の「入力方式」で下記のいずれかが選択されているか\nメニューBの項目Xの定義において、入力方式が「文字列(単一行)」「文字列(複数行)」「整数」「小数」「日時」「日付」「リンク」のいずれかが選択されているか、ご確認ください。\n{img{asset/faq/create_menu_003.png}70%}"},
"4":{"Q":"メニュー作成時に、『Row size too large』というSQLエラーが発生し、メニュー作成できなかった。","A":"MariaDBの制約で、1レコードの容量の上限に達しているためエラーとなっております。\n一例としては、カラム数が344以上になるとエラーとなります。\nカラムの数を減らす、またはメニューを分割するなどして容量内での設定を行って下さい。"},
"5":{"Q":"メニュー名に記号は使えるの？","A":"メニュー名に「\\/:*?\"<>|[]：￥／＊［］」は使用できません。"}
},
"ホストグループ管理":{
"data":{"frequently":"","abbreviation":"","icon":"fa-server","id":"host-group"},
"1":{"Q":"ホストグループって何？","A":"ホストグループとは、ホスト群を論理的な単位（機能・役割）でまとめたグループのことを指します。\nホストグループ管理機能を使用すると、グルーピングしたホストに対してまとめて作業指示を出すことが可能になり、多数のホストを管理する大規模システムでの作業が容易になります。\nまた、ホストグループ間で親子関係を定義することで、親ホストグループに設定したパラメータを子ホストグループに継承することができます。\n\n詳しくは、コミュニティサイトのLeanの「{a{https://exastro-suite.github.io/it-automation-docs/learn_ja.html#hgPs}Exastro IT Automation ホストグループ管理・メニュー作成}」をご参照下さい。"}
},
"Ansible-driver":{
"data":{"frequently":"","abbreviation":"","icon":"fa-cog","id":"ansible"},
"1":{"Q":"Windows ServerにPioneerでSSHログインして設定する方法","A":"対話ファイルを以下のように記述してください。\n・BOM無しにする。\n・改行コードはCRLFとする。\n・Windows側で実行するコマンドは\"で囲んで、末尾に\\rを追加する。\n　(改行コード対応のため)\n\n例)windowsサーバで新規にディレクトリを作成する。\n__{code{conf:\n  timeout: 10\nexec_list:\n  - expect: 'password:'\n    exec: XXXXXXXX\n  - expect: 'Administrator>'\n    exec: \"mkdir SSLtest_0525\\r\"\n  - expect: 'Administrator>'\n    exec: \"exit\\r\"}playbook}__"},
"2":{"Q":"ファイル管理とテンプレート管理って何が違うの？","A":"ファイル管理では、Playbook内で定義している各モジュールで使用するファイルの登録を行います。\nファイル素材は、copyモジュールやfileモジュールなどで使用する静的なファイルです。\n\nテンプレート管理では、Playbookで定義しているtemplateモジュールなどで使用するファイルを登録します。\nテンプレート管理のファイルは、Jinja2というテンプレート言語で記述したもので、条件分岐や変数など、ファイルを動的に作成することができます。"},
"3":{"Q":"どうしてテンプレート管理は変数を、自動ではなく手動で設定しなくてはいけないの？","A":"テンプレート管理で扱う、templateモジュールやios_configモジュールは、Jinja2という形式を使用しています。\nJinja2形式の変数は自動で刈り取ることができないため、手動での登録が必要となります。"},
"4":{"Q":"Playbook内の変数（VAR_XXX）の具体値の定義をせずに作業実行をした場合、どのタイミングでエラーなる?","A":"【Ansible-Legacy、Ansible-Pioneerの場合】\nAnsibleを実行する前に、ITAにて想定外エラーとなります。\n\n【Ansible-LegacyRoleの場合】\nAnsibleは実行されます。\ndefault/main.ymlなどに具体値の定義がされていれば、その値で実行されますが、定義がない場合はその変数を使用するタイミングでエラーとなります。"},
"5":{"Q":"代入値自動登録設定を利用して、パラメータシートの具体値が正常に代入値管理へ反映されない。","A":"代入値自動登録設定の定義情報を確認してください。\n自動登録設定に従って、パラメータシートの値を自動で代入値管理に登録する機能は、最終更新者がその機能以外の場合、更新しないようになっています。\nこれはユーザーが代入値管理を直接編集した場合、それを自動で上書きするのを防ぐためです。"},
"6":{"Q":"機器一覧のユーザーに root ユーザー以外を設定したホストに対して legacy の作業実行をしたが、Ansible のコマンドでエラーが発生する。","A":"ITA で Ansible のコマンドを実行する場合に sudo パラメータのデフォルトを yes に設定しています。\n作業対象ホスト側で該当ユーザーに対する sudo 権限を設定してください。\nsudo 権限を与えられない場合は sudo パラメータの設定を Playbook に追記してください。"},
"7":{"Q":"機器一覧のプロトコルを telnet に設定したホストに対して pioneer の作業実行をしたが、作業対象ホストへの接続でエラーになる。","A":"よくあるエラー原因としては、対話ファイルに記述しているパスワードおよびパスワードプロンプトの記述が正しくない場合がありますので、ご確認ください。\n\n例として、expect モジュールと exec モジュールで以下のようにtelnet接続時のパスワードを記述したとします。\n　△△-△expect:△’Password’\n　△△△△exec:△itapassword\n　※△:半角スペース\n\n[考えられるエラー]\n ・expactで期待するパスワードプロンプトがPasswordではなく、passwordだった。\n ・パスワードがitapasswordではなかった。"},
"8":{"Q":"機器一覧の認証方式を公開鍵認証に設定したホストに対してオーケストレーターの作業実行をしたが、ターゲットホストへの接続でエラーとなる。","A":"Ansible サーバおよび AnsibleTower サーバの.ssh/known_hosts にターゲットホスト側の公開鍵が登録されているかを確認してください。\n上記サーバからターゲットホストに対して ssh コマンドで該当ホスト名または IP アドレスでログインすることで公開鍵が登録されます。"},
"9":{"Q":"機器一覧の認証方式をパスワード認証に設定したホストに対してオーケストレーターの作業実行をしたが、ターゲットホストへの接続でエラーとなる。","A":"ターゲットホスト側の ssh の設定で password 認証を許可しているか確認してください。"},
"10":{"Q":"Movement 一覧でホスト指定形式を指定して各オーケストレーターの作業実行をしたがターゲットホストへの接続でエラーとなる。","A":"よくあるエラーの原因として以下2つの場合があります。\n\n【１．名前解決ができていない場合のエラー】\n名前解決をするか、IPアドレス指定を行います。名前解決は以下のどちらかに設定してください。\n・DNSサーバ　→/etc/resolv.confにDNSサーバの設定（IPアドレス）を入れてください。\n・hostsファイル　→/etc/hostsに該当ホスト名のアドレス解決の設定を入れてください。\n\nIPアドレスを指定する場合は、Movement一覧の登録の際のホスト指定形式パラメータで、IPアドレス指定を行います。\n\n【２．ホスト名で公開鍵が設定されていない場合のエラー】\nssh接続の場合、Ansibleサーバおよび AnsibleTowerサーバの known_hosts に該当ホスト名でターゲットホスト側の公開鍵が登録されているかを確認して下さい。"},
"11":{"Q":"プレイブックで/tmp にファイルを作成しているが、/tmp にファイルが作成されていない。","A":"RHEL7 より PrivateTmp 機能が追加されています。\nITA でインストールした Apache は PrivateTmp機能を有効にしています。\nITA からのプレイブックの実行は Apache を経由していますので、/tmp が別ディレクトリにバインドされています。\nITA ではプレイブックからの/tmp へのファイルアクセスは控えて頂くことを推奨しています。"},
"12":{"Q":"Ansible から Windows サーバへの接続ができない。","A":"Windows サーバで Powershell を管理者権限で起動し、下記の各コマンドを実施して下さい。\nC:\\User\\User> Enable-PSRemoting -Force\n↓\nC:\\User\\User> Set-NetConnectionProfile -InterfaceAlias (Get-NetConnectionProfile - IPv4Connectivity Internet).InterfaceAlias -NetworkCategory Private\n↓\nC:\\User\\User> winrm set winrm/config/service/auth '@{Basic=\"true\"}'\n↓\nC:\\User\\User> winrm set winrm/config/service '@{AllowUnencrypted=\"true\"}'\n\nまた、Ansible-Legacy/Roleを利用する場合は、 機器一覧とMovement一覧のWinRM接続を「●」にして下さい。"},
"13":{"Q":"Ansible-LegacyRoleモードのRoleファイル(zip)を作る手順を教えてほしい。","A":"AnsibleのRoleファイルをLegacyRoleで利用するための手順は、LearnページのExastro IT Automation Ansibleとの連携{a{https://exastro-suite.github.io/it-automation-docs/asset/Learn_ja/ITA-Ansible-Driver_ja_practice.pdf}「Exastro IT Automation Ansible Driver【実習編】」の第二章Ansible-LegacyRole編}に詳細がございます。"},
"14":{"Q":"Ansible-Driverの3つのモードの違いとは？","A":"Ansible-Driverはこちらの3つの観点から場合に合わせてご利用いただけます。\n・「IaCの再利用」Playbookの再利用に長けたAnsible-Legacyモード\n・「ノウハウの活用」AnsibleRoleを使用可能なAnsible-LegacyRoleモード\n・「適用範囲」独自の対話ファイルにより様々な状況に対応できるAnsible-Pioneerモード\n\n詳細はウェブページより{a{https://exastro-suite.github.io/it-automation-docs/asset/Learn_ja/ITA-Ansible-Driver_ja.pdf}「Exastro IT Automation Ansible Driver【座学編】」}をご確認ください。"},
"15":{"Q":"ITAとAnsible Towerの違いと、連携時の役割分担は？","A":"Ansible TowerとITAの違いは以下になります。\n\nITAは設定データを蓄積／管理し、Ansibleを実行するために必要なディレクトリやコンフィグファイルを生成することができます。\n\nAnsible Towerはクラスタ間通信をセキュアに実行し、さらに異なるバージョンのAnsibleEngine（Ansible playbookを実行するエンジン）をコントロールすることが可能です。\n\nITA + Ansible Tower + Ansible Engine という構成にすることで、それぞれの特徴を組み合わせた自動構築システムにすることができます。\n{img{asset/faq/ansible_001.jpg}100%}"},
"16":{"Q":"ひとつのAnsibleTowerに対して、複数のITAを連携させることは可能なのか？","A":"ひとつのAnsibleTowerに対して、複数のITAを連携させることは可能です。\nデータが競合しないように、以下の設定をITAごと違うものにするようにして下さい。\n\n①データストレージパス（symphonyとconductor用）\nAnsible共通＞インターフェイス情報\n Symphonyインスタンスデータリレイストレージパス(Ansible)\n Conductorインスタンスデータリレイストレージパス(Ansible)\n\n②Ansible用作業番号\n管理コンソール＞シーケンス管理\n　C_ANSIBLE_LNS_EXE_INS_MNG_JSQ\n　C_ANSIBLE_LRL_EXE_INS_MNG_JSQ\n　C_ANSIBLE_PNS_EXE_INS_MNG_JSQ\n　C_SYMPHONY_INSTANCE_MNG_JSQ\n　C_CONDUCTOR_INSTANCE_MNG_JSQ"},
"17":{"Q":"Ansibleなどシステムから取得した情報を、ExastroのCMDBに取り込むには？","A":"収集機能を使用して、情報をCMDBに取り込むことができます。\n収集機能とは、ITAで実施したAnsibleの作業実行結果（規定のフォーマットで出力されたソースファイル）を元に、パラメータシートへ値を自動で登録する機能です。\nパラメータシートを作成し、ソースファイルとパラメータシートとの紐付等を事前に設定した上で実行いただけます。\n\n収集機能の詳細は{a{https://exastro-suite.github.io/it-automation-docs/asset/Documents_ja/Exastro-ITA_%E5%88%A9%E7%94%A8%E6%89%8B%E9%A0%86%E3%83%9E%E3%83%8B%E3%83%A5%E3%82%A2%E3%83%AB_%E5%8F%8E%E9%9B%86%E6%A9%9F%E8%83%BD.pdf}こちら}を参照ください。"},
"18":{"Q":"AWSから情報を取得したい","A":"AnsibleのAWS用のモジュールをご活用いただけます。\n一例として、EC2のリストを取得する場合は、以下のようなPlaybookを作成ください。\n\n※ 変数(VAR_○○○○)はExastro IT Automationから与えることが可能です。\n※ {ank{#ansible-q20}取得した情報は、同じくAnsible Playbookにて、Exastro IT AutomationのAPIを使って、Exastro IT Automationのパラメータシート等に登録/更新する、といった応用も可能です。}\n\n__{code{- name: get VM list\n  ec2_instance_info:\n    aws_access_key: \"{{ VAR_aws_access_key }}\"\n    aws_secret_key: \"{{ VAR_aws_secret_key }}\"\n    region: \"{{ VAR_region }}\"\n    validate_certs: no\n    filters:\n      \"tag:Name\": \"{{ VAR_tagName }}*\"\n      \"instance-state-name\": [ \"running\" ]\n  register: ec2_info_from_aws}playbook}__\nAzureは{ank{#ansible-q19}こちら}"},
"19":{"Q":"Azureから情報を取得したい","A":"ansible-collectionsからAzure向けのモジュールをインストールしていただければ、AnsibleのAzureのモジュールをご活用いただけます。\n\n[ansible-collectionsからAzure向けのモジュールをインストールする方法]\n{code{# curl https://raw.githubusercontent.com/ansible-collections/azure/dev/requirements-azure.txt > requirements-azure.txt\n# pip3 install -r requirements-azure.txt}command}\n\n一例として、パブリックIPアドレスの情報を取得する場合は、以下のようなPlaybookを作成してください。\n※ 変数(VAR_○○○○)はExastro IT Automationから与えることが可能です。\n※ {ank{#ansible-q20}取得した情報は、同じくAnsible Playbookにて、Exastro IT AutomationのAPIを使って、Exastro IT Automationのパラメータシート等に登録/更新する、といった応用も可能です。}\n\n__{code{- name: get Public IP Address info\n  azure_rm_publicipaddress_info:\n    subscription_id: \"{{ VAR_azure_subscription_id }}\"\n    tenant: \"{{ VAR_azure_tenant_id }}\"\n    client_id: \"{{ VAR_azure_client_id }}\"\n    secret: \"{{ VAR_azure_secret }}\"\n    cert_validation_mode: \"ignore\"\n    resource_group: \"{{ VAR_azure_resource_group }}\"\n  register: vm_info_from_azure}playbook}__\nAWSは{ank{#ansible-q18}こちら}"},
"20":{"Q":"Ansible PlaybookからExastro IT Automationにアクセスしたい","A":"Ansible Playbookにて、Exastro IT AutomationのAPIを使って、Exastro IT Automationにアクセスすることが可能です。\n[例]\n・パラメータシート等の情報を参照/登録/更新/廃止/復活する\n・Conductorを実行する\n\n一例として、Exastro IT Automationの「機器一覧」を参照する場合は、以下のようなPlaybookを作成ください。\n※ 「VAR_exastro_user_pswd_base64」には、Exastro IT Automationのユーザ/パスワードを使って、「ユーザ:パスワード」の結合文字列をbase64エンコードした値を設定してください。\n\n__{code{- name: 「機器一覧」を参照する\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100000303\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ VAR_exastro_user_pswd_base64 }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"FILTER\"\n    body_format: json\n    body:\n      \"1\":\n        \"NORMAL\": \"0\"\n  register: device_list_from_exastro}playbook}__\n\nVBA、シェル版は{ank{#general-q13}こちら}を参照してください。"},
"21":{"Q":"デフォルトで設定されるヘッダーセクションを知りたい","A":"ヘッダーセクションのデフォルトは以下になります。\n\nAnsible-driver　＞＞　Movement一覧　の登録画面で、ヘッダーセクションの欄が未入力の場合はこちらが自動で設定されます。\n\n設定を変える場合は上記の欄に以下を記載し、変更したい箇所を変えて登録してください。\n__{code{- hosts: all\n  remote_user: \"{{ __loginuser__ }} \"\n  gather_facts: no\n  become: yes}playbook}__"},
"22":{"Q":"Ansible-LegacyRoleモードにおいてdefault/main.ymlとitareadmeとパラメータシートでどれが強くて、最終的にどう運ばれるのか？","A":"パラメータの優先順位について、{a{https://exastro-suite.github.io/it-automation-docs/asset/Documents_ja/Exastro-ITA_%E5%88%A9%E7%94%A8%E6%89%8B%E9%A0%86%E3%83%9E%E3%83%8B%E3%83%A5%E3%82%A2%E3%83%AB_Ansible-driver.pdf}Ansible-driverの利用手順マニュアル}で解説されております。以下の章をご確認ください。\n・『ロールパッケージ（Ansible-Legacy Role）の記述』\n・『 「ita_readme」と「読替表」の活用例（Ansible-Legacy Role のみ）』"},
"23":{"Q":"作業実行時に進行状況(エラーログ)にpythonのワーニングメッセージが表示される。","A":"ITAのインストーラはansibleに必要な下記pythonパッケージをインストールしていますが、一部のOSでpythonモジュールの依存関係が壊れた状態となり、作業実行時に以下のワーニングメッセージが出力されます。\n\nITAのインストーラでインストールしているpythonパッケージ\n{cmd{・pexpect pywinrm boto3 paramiko boto}command}\n\n出力されるワーニングメッセージ\n{cmd{/usr/lib/python3.6/site-packages/requests/__init__.py:91: \n　RequestsDependencyWarning: urllib3 (1.26.4) or chardet (3.0.4) doesn't match a supported version!\n　RequestsDependencyWarning)}command}\n\nこのようなワーニングメッセージが出力された場合、下記1～5の手順でpythonモジュールの依存関係の修復お願いします。\n\n1.Pythonモジュールの依存関係を確認するコマンド『pipdeptree』をインストールします。\n# pip install pipdeptree\n\n2.『pipdeptree』コマンドでPythonパッケージの依存関係を確認します。\n# pipdeptree\n\n3.依存関係の確認\nurllib3がboto3とpywinrmの依存関係にありますが、期待するバージョンの範囲が矛盾している為、pywinrmの依存関係にあるrequestsで期待しているurllib3のバージョンの範囲外となり、pythonがワーニングを出力しています。\n・boto3:     - urllib3 [required: >=1.25.4,<1.27, installed: 1.26.4]\n・pywinrm:   - urllib3 [required: >=1.21.1,<1.25, installed: 1.26.4]\n\npipdeptreeが出力した依存関係(一部抜粋)\n{cmd{　Warning!!! Possibly conflicting dependencies found:\n　* requests==2.20.0\n　 - urllib3 [required: >=1.21.1,<1.25, installed: 1.26.4]\n　-------------------------------------------------------------------\n　boto3==1.17.53\n　  - s3transfer [required: >=0.3.0,<0.4.0, installed: 0.3.7]\n　    - botocore [required: >=1.12.36,<2.0a.0, installed: 1.20.53]\n　      - jmespath [required: >=0.7.1,<1.0.0, installed: 0.10.0]\n　      - python-dateutil [required: >=2.1,<3.0.0, installed: 2.6.1]\n　        - six [required: >=1.5, installed: 1.11.0]\n　      - urllib3 [required: >=1.25.4,<1.27, installed: 1.26.4]\n　pywinrm==0.4.1\n　    - requests [required: >=2.0.0, installed: 2.20.0]\n　      - chardet [required: >=3.0.2,<3.1.0, installed: 3.0.4]\n　      - idna [required: >=2.5,<2.8, installed: 2.5]\n　      - urllib3 [required: >=1.21.1,<1.25, installed: 1.26.4]}command}\n\n4.『pip』コマンドで依存関係を修復\nrequestsをアップグレードします。\n# pip install --upgrade requests\n\n5.『pipdeptree』コマンドでPythonパッケージの依存関係を再確認します。\nrequestsをアップグレードすることで、urllib3がboto3とpywinrmで期待するバージョンとなります。\n・boto3:     - urllib3 [required: >=1.25.4,<1.27, installed: 1.26.4]\n・pywinrm:   - urllib3 [required: >=1.21.1,<1.27, installed: 1.26.4]\n\npipdeptreeが出力した依存関係(一部抜粋)\n{cmd{　boto3==1.17.53\n　 - s3transfer [required: >=0.3.0,<0.4.0, installed: 0.3.7]\n　    - botocore [required: >=1.12.36,<2.0a.0, installed: 1.20.53]\n　      - jmespath [required: >=0.7.1,<1.0.0, installed: 0.10.0]\n　      - python-dateutil [required: >=2.1,<3.0.0, installed: 2.6.1]\n　        - six [required: >=1.5, installed: 1.11.0]\n　      - urllib3 [required: >=1.25.4,<1.27, installed: 1.26.4]\n　pywinrm==0.4.1\n　    - requests [required: >=2.0.0, installed: 2.25.1]\n　      - certifi [required: >=2017.4.17, installed: 2020.12.5]\n　      - chardet [required: >=3.0.2,<5, installed: 3.0.4]\n　      - idna [required: >=2.5,<3, installed: 2.5]\n　      - urllib3 [required: >=1.21.1,<1.27, installed: 1.26.4]}command}"},
"24":{"Q":"値をYESとしたパラメータシートの項目をAnsible-driverと連携させ、Playbookの変数の代入値としたが、Ansible実行時にTrueと認識され、文字列としてYESを利用できない。","A":"YESはAnsibleの仕様で、自動的にTrue（boolean）に変換されます。\nそのため、文字列としては利用することができません。\n\n下記の場合、大小文字関係なく、True/Falseとなります。\n-----\nYES/NO\nON/OFF\n-----\n\n 「YES」「NO」を文字列として利用したい場合は、パラメータシートの該当項目を”YES”のようにダブルコーテーションもしくはシングルコーテーションで囲う必要があります。"},
"25":{"Q":"収集機能の使い方サンプルがほしい。","A":"このサンプルコードはOSの機器情報を収集するPlaybookです。AnsibleのGather Factsを利用しています。\n\nGather Factsを有効にするには、あらかじめ　Ansible-driver　＞＞　Movement一覧　の登録画面のヘッダーセクションで、gather_factsをonにしておいてください。\nヘッダーセクションについては{ank{#ansible-q21}こちら}を参照してください。\n\nPlaybook内で作成したYAMLファイルの変数と、事前に用意したパラメータシートの項目を「収集項目値管理」から紐づけることによって、収集した値をパラメータシートに登録することができます。\n\n__{code{- name: make directory\n  file:\n    path: \"{{ __workflowdir__ }}/../_parameters/{{ inventory_hostname }}\"\n    state: directory\n    recurse: yes\n  delegate_to: localhost\n\n- name: make yaml file\n  blockinfile:\n    create: yes\n    mode: 644\n    insertbefore: EOF\n    marker: \"\"\n    dest: \"{{ __workflowdir__ }}/../_parameters/{{ inventory_hostname }}/hogehoge.yml\"\n    content: |\n      ansible_architecture: {{ ansible_architecture }}\n      ansible_bios_version: {{ ansible_bios_version }}\n      ansible_default_ipv4__address: {{ ansible_default_ipv4.address }}\n      ansible_default_ipv4__interface: {{ ansible_default_ipv4.interface }}\n      ansible_default_ipv4__network: {{ ansible_default_ipv4.network }}\n      ansible_distribution: {{ ansible_distribution }}\n      ansible_distribution_file_path: {{ ansible_distribution_file_path }}\n      ansible_distribution_file_variety: {{ ansible_distribution_file_variety }}\n      ansible_distribution_major_version: {{ ansible_distribution_major_version }}\n      ansible_distribution_release: {{ ansible_distribution_release }}\n      ansible_distribution_version: {{ ansible_distribution_version }}\n      ansible_machine: {{ ansible_machine }}\n      ansible_memtotal_mb: {{ ansible_memtotal_mb }}\n      ansible_nodename: {{ ansible_nodename }}\n      ansible_os_family: {{ ansible_os_family }}\n      ansible_pkg_mgr: {{ ansible_pkg_mgr }}\n      ansible_processor_cores: {{ ansible_processor_cores }}\n      ansible_processor_count: {{ ansible_processor_count }}\n      ansible_processor_nproc: {{ ansible_processor_nproc }}\n      ansible_processor_threads_per_core: {{ ansible_processor_threads_per_core }}\n      ansible_processor_vcpus: {{ ansible_processor_vcpus }}\n      ansible_product_name: {{ ansible_product_name }}\n      ansible_product_serial: {{ ansible_product_serial }}\n      ansible_product_uuid: {{ ansible_product_uuid }}\n      ansible_product_version: {{ ansible_product_version }}\n      ansible_python__executable: {{ ansible_python.executable }}\n      ansible_python_version: {{ ansible_python_version }}\n      ansible_service_mgr: {{ ansible_service_mgr }}\n  delegate_to: localhost}playbook}__\n"},
"26":{"Q":"Playbook素材のアップロードに失敗した。","A":"Playbookの書き方に誤りがある可能性があります。\n以下を確認してください。\n\n・文字コードは【UTF-8 BOMなし】に指定する\n・YAML形式にする\n・Playbook内のインデントは2倍数にする\n\nなお、Playbookの書式に関してはAnsibleの公式マニュアルを参照してください。"},
"27":{"Q":"「VM払い出し→そのVMに様々な設定を入れる」といった手順を自動化したいが、実行前にはまだVMが払い出されていないのでIPアドレス等分からない状態で、自動化は可能か？","A":"VM払出し後の設定対象を、ホストグループに設定することによって可能です。\nVMを払出した後、払い出したVM一覧を取得しITAの「機器一覧」・「ホストグループ一覧」に登録するPlaybookを実行し、そこで登録したホストグループに対して設定を行うことで、実行前にIPアドレス等がわからない状態でも自動化ができます。\n{img{asset/faq/ansible_002.PNG}50%}\n\n以下はAWS EC2のリストを取得し、ITAに登録するサンプルコードです。\n\n下記のサンプルコードをまとめたConductor①と、本来行いたい設定のIaCをまとめたConductor②を作成し、2つのConductorをそれぞれ順に新たなConductorで呼び出し(Conductor Call)まとめます。\nConductor②のみ、対象機器を作成したホストグループに指定することで払い出したVMのリストを読み込み、ITAに登録された後に設定を行うことができます。\n※VMのリストを読み込みITAのCMDBに追加されるまでの間に時間がかかる場合があります。\n\nEC2リスト取得\n取得したEC2リストをConductor作業ディレクトリに保存\n__{code{- name: get VM list\n  ec2_instance_info:\n    aws_access_key: \"{{ VAR_aws_access_key }}\"\n    aws_secret_key: \"{{ VAR_aws_secret_key }}\"\n    region: \"{{ VAR_region }}\"\n    validate_certs: no\n    filters:\n      \"tag:Name\": \"{{ VAR_tagName }}*\"\n      \"instance-state-name\": [ \"running\" ]\n  register: ec2_info_from_aws\n\n- name: output VM list\n  local_action:\n    module: copy\n    content: \"{{ ec2_info_from_aws.instances }}\"\n    dest: \"{{ __conductor_workflowdir__ }}/{{ VAR_VMListFileName }}\"}playbook}__\n\n\nConductor作業ディレクトリに保存されたEC2リストを読み出し\n「機器一覧」に登録、廃止または更新を行う。\n__{code{- name: 「VMリストファイル」を読み込み\n  local_action: shell cat \"{{ __conductor_workflowdir__ }}/{{ VAR_VMListFileName }}\"\n  register: responce\n\n- name: 読み込んだデータを(JSON)を整形\n  set_fact:\n    vm_info_from_file: \"{{ responce.stdout | from_json }}\"\n\n- name: Exastro IT Automationにアクセスするためのauthorizationを生成\n  command: echo \"{{ VAR_exastro_user }}:{{ VAR_exastro_pswd }}\"\n  register: user_n_account\n\n- name: 「機器一覧」メニューからデータを取得(検索条件：ホストグループ名)\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100000303\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"FILTER\"\n    body_format: json\n    body:\n      \"1\":\n        \"NORMAL\": \"0\"\n      \"28\":\n        \"NORMAL\": \"ホストグループ：{{ VAR_hostgroup_name }}\"\n  register: device_list_from_exastro\n\n- name: 取得したデータからレコード情報を抽出\n  set_fact:\n    device_list_from_exastro_body: \"{{ device_list_from_exastro.json.resultdata.CONTENTS.BODY }}\"\n\n- name: 「機器一覧」に存在しており「VMリストファイル」に存在しないデータは「廃止」\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100000303\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"EDIT\"\n    body_format: json\n    body:\n      \"0\":\n        \"0\": \"廃止\"\n        \"2\": \"{{ item.2 }}\"\n        \"30\": \"{{ item.30 }}\"\n  when:\n    - item.0 == None\n    - vm_info_from_file | map(attribute='public_dns_name') | list | select('match', item.4) | length == 0\n  with_items:\n    - \"{{ device_list_from_exastro_body }}\"\n\n- name: 「機器一覧」と「VMリストファイル」の両方に存在しておりIPアドレスが一致しない場合は「更新」\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100000303\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"EDIT\"\n    body_format: json\n    body:\n      \"0\":\n        \"0\": \"更新\"\n        \"2\": \"{{ item.2 }}\"\n        \"4\": \"{{ item.4 }}\"\n        \"5\": \"{{ vm_info_from_file | selectattr('public_dns_name', '==', item.4) | map(attribute='public_ip_address') | join() }}\"\n        \"20\": \"{{ item.20 }}\"\n        \"30\": \"{{ item.30 }}\"\n  when:\n    - item.0 == None\n    - vm_info_from_file | map(attribute='public_dns_name') | list | select('match', item.4) | length == 1\n    - vm_info_from_file | selectattr('public_dns_name', '==', item.4) | map(attribute='public_ip_address') | join() != item.5\n  with_items:\n    - \"{{ device_list_from_exastro_body }}\"\n\n- name: 「機器一覧」からホスト名を抽出してリスト化(見出し行を含む)\n  set_fact:\n    host_name: \"{{ item.4 }}\"\n  register: device_list_from_exastro_hostnames\n  with_items:\n    - \"{{ device_list_from_exastro_body }}\"\n\n- name: 「VMリストファイル」に存在しており「機器一覧」に存在しないデータは「登録」\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100000303\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"EDIT\"\n    body_format: json\n    body:\n      \"0\":\n        \"0\": \"登録\"\n        \"3\": \"SV\"\n        \"4\": \"{{ item.0 }}\"\n        \"5\": \"{{ item.1 }}\"\n        \"8\": \"{{ VAR_vm_user }}\"\n        \"11\": \"{{ VAR_keypair_name }}\"\n        \"12\": \"鍵認証\"\n        \"20\": \"machine\"\n        \"28\": \"ホストグループ：{{ VAR_hostgroup_name }}\"\n      \"UPLOAD_FILE\":\n        \"0\":\n          \"11\": \"{{ VAR_keypair_contents }}\"\n  when:\n    - device_list_from_exastro_hostnames.results | map(attribute='ansible_facts.host_name') | list | select('match', item.0) | length == 0\n  with_together:\n    - \"{{ vm_info_from_file | map(attribute='public_dns_name') | list }}\"\n    - \"{{ vm_info_from_file | map(attribute='public_ip_address') | list }}\"}playbook}__\n\nConductor作業ディレクトリに保存されたEC2リストを読み出し\n「ホストグループ一覧」に登録、廃止または更新を行う。\n__{code{- name: 「VMリストファイル」を読み込み\n  local_action: shell cat \"{{ __conductor_workflowdir__ }}/{{ VAR_VMListFileName }}\"\n  register: responce\n\n- name: 読み込んだデータを(JSON)を整形\n  set_fact:\n    vm_info_from_file: \"{{ responce.stdout | from_json }}\"\n\n- name: Exastro IT Automationにアクセスするためのauthorizationを生成\n  command: echo \"{{ VAR_exastro_user }}:{{ VAR_exastro_pswd }}\"\n  register: user_n_account\n\n- name: 「ホスト紐付管理」メニューからデータを取得(検索条件：ホストグループ名)\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100170003\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"FILTER\"\n    body_format: json\n    body:\n      \"1\":\n        \"NORMAL\": \"0\"\n      \"3\":\n        \"NORMAL\": \"{{ VAR_hostgroup_name }}\"\n  register: host_link_list_from_exastro\n\n- name: 取得したデータからレコード情報を抽出\n  set_fact:\n    host_link_list_from_exastro_body: \"{{ host_link_list_from_exastro.json.resultdata.CONTENTS.BODY }}\"\n\n- name: 「ホスト紐付管理」に存在しており「VMリストファイル」に存在しないデータは「廃止」\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100170003\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"EDIT\"\n    body_format: json\n    body:\n      \"0\":\n        \"0\": \"廃止\"\n        \"2\": \"{{ item.2 }}\"\n        \"9\": \"{{ item.9 }}\"\n  when:\n    - item.0 == None\n    - vm_info_from_file | map(attribute='public_dns_name') | list | select('match', item.5) | length == 0\n  with_items:\n    - \"{{ host_link_list_from_exastro_body }}\"\n\n- name: 「ホスト紐付管理」からホスト名を抽出してリスト化(見出し行を含む)\n  set_fact:\n    host_name: \"{{ item.5 }}\"\n  register: host_link_list_from_exastro_hostnames\n  with_items:\n    - \"{{ host_link_list_from_exastro_body }}\"\n\n- name: 「VMリストファイル」に存在しており「ホスト紐付管理」に存在しないデータは「登録」\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100170003\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"EDIT\"\n    body_format: json\n    body:\n      \"0\":\n        \"0\": \"登録\"\n        \"3\": \"{{ VAR_hostgroup_name }}\"\n        \"5\": \"{{ item }}\"\n  when:\n    - host_link_list_from_exastro_hostnames.results | map(attribute='ansible_facts.host_name') | list | select('match', item) | length == 0\n  with_items:\n    - \"{{ vm_info_from_file | map(attribute='public_dns_name') | list }}\"}playbook}__"},
"28":{"Q":"Ansible-Legacyの代入値自動登録に時間がかかる。","A":"「legacy 自動登録設定」を短くしていただくことで起動周期を早くすることは可能です。\n\n【変更手順】\n①ITAサーバにSSHでログインする。\n\n②ファイルを修正する。\n対象ファイルパス：/usr/lib/systemd/system/ky_legacy_varsautolistup-workflow.service\n修正箇所　赤字箇所を修正　最小指定単位は1秒になります。\n{cmd{[Unit]\nDescription=ky_legacy_varsautolistup-workflow\nAfter=syslog.target network.target mysqld.service\n\n[Service]\nEnvironmentFile=/etc/sysconfig/ita_env\nExecStart=/bin/sh ${ITA_ROOT_DIR}/backyards/common/ky_loopcall-php-procedure.sh /bin/php /bin/php ${ITA_ROOT_DIR}/back\nyards/ansible_driver/ky_legacy_varsautolistup-workflow.php ${ITA_ROOT_DIR}/logs/backyardlogs {color{10}#FF0000} ${ITA_LOG_LEVEL} > /de\nv/null 2>&1\nExecReload=/bin/kill -HUP $MAINPID\nExecStop=/bin/kill $MAINPID\n\n[Install]\nWantedBy=multi-user.target}command}\n\n③サービスの再起動\n「ky_legacy_varsautolistup-workflow.service」のプロセスを再起動してください。\n\n※ 設定間隔が短いほどサーバーの負荷が上がりますので、ご注意ください。"},
"29":{"Q":"Ansibleのログの出力レベルを詳細にしたい。","A":"ログの出力レベルを変更することが可能です。\n\nAnsible共通 > インターフェース情報 を開いていただくと、一覧で表示されているレコードの［オプションパラメータ］カラムがデフォルト「-v」になっていますので、「-vvv」に変更してください。"}
},
"Terraform-driver":{
"data":{"frequently":"","abbreviation":"","icon":"fa-cog","id":"terraform"},
"1":{"Q":"Terraformドライバの作業実行時に以下のエラーがログに表示される。\n>「[API Error]ModuleファイルアップロードURLの取得に失敗しました」","A":"「インターフェース情報」で「User Token」に設定するトークンの種類が間違っている可能性があります。\nTerraformからは「User Token」「Team Token」「Organization Token」の3種類のトークンが発行できますが、ITAで使用できるトークンは「User Token」となります。\nTerraform管理画面から以下の手順で発行したトークンを利用してください。\n[User Settings] > [Tokens] > [Creat an API token]"}
},
"ドキュメント":{
"data":{"frequently":"","abbreviation":"","icon":"fa-file","id":"documents"},
"1":{"Q":"過去バージョンののドキュメントが見たい。","A":"こちらからご参照頂けます。\n「vx.x.x」を参照したいバージョンにして、ご確認ください。\n\n日本語版：https://github.com/exastro-suite/it-automation-docs/tree/vx.x.x/asset/Documents_ja\n英語版：https://github.com/exastro-suite/it-automation-docs/tree/vx.x.x/asset/Documents"}
}
},
"en": {
"General":{
"data":{"frequently":"","abbreviation":"","icon":"fa-sticky-note","id":"general"},
"1":{"Q":"I want to upload and manage restricted files, such as PHP files, Share files and EXE files","A":"Files with the following extensions: 「.exe」「.com」「.php」「.cgi」「.sh」「.sql」「.vbs」「.js」「.pl」「.ini」「.htaccess」are restricted by default. It is possible to change those settings from the \"Management Console\">\"System settings\" menu. However, please keep in mind that there is a chance security holes will be created by doing this."},
"2":{"Q":"Does ITA have any Maintenance service?","A":"Since ITA is an Open Source Software, there is no Maintenance service in the developer community. NEC is developing a/the Maintenance support service. (Japanese only) 『{a{https://www.support.nec.co.jp/View.aspx?NoClear=on&id=3030100331}NECサポートポータル Exastro IT Automation 導入支援サポート・保守サポートご紹介}』"},
"3":{"Q":"Is it possible to import the form (Excel format) used in the existing project into Exastro IT Automation's CMDB (Parameter sheet)?","A":"Unfortunately, you can't upload/download Excel file as it is in your existing project because the format of Excel to upload/download in ITA is fixed.\nIt is necessary to rewrite it to the format provided by ITA.\n\nAlternatively, you can use the machine interface (Rest API) function provided by ITA to code Excel used in existing project with VBA and synchronize information.\nFor details about REST-API please refer {ank{#general-q13}here}."},
"4":{"Q":"I added CPU and memory, but the performance does not improve.","A":"It is necessary to tune the cofiguration values according to the machine specifications.\nPlease refer to this document for tuning reference value."},
"5":{"Q":"What is the different between ITA and monitoring software (Zabbix, etc.)? How are the roles divided when both of them are used.","A":"Exastro is a tool aimed to improve the efficiency of system operation and construction.\nIt is therefore different to monitoring softwares, such as Zabbix, as it does not \ncome with Network device monitoring or alarm functions. \n\nIt is possible to link Exastro and monitoring softwares.\nWhen linked, the workflow is as shown in the picture below. \nThe monitoring software (marked with red) sends any incoming error messages to Exastro OASE\nwhere the error contents are compared to a rule list. \nIf the error is an already known error, it will be sent to ITA where work arounds or solutions gets provided.\n{img{asset/faq/general_003_en.jpg}100%}"},
"6":{"Q":"What is the different between Ansible and Terraform? How are the roles divided when both of them are used.","A":"The difference between Ansible and Terraform is as following.\nAnsible is a construction/management tool for Imperative IaC (Continuous)\nThe main objective is construct and manage any app settings and software installations on the OS.\nIt excells at performing the tasks in its intended order.\n\nTerraform is an orchestrating tool for declarative IaC(Declarative API) that improves the efficiency of infrastructure construction.\n\nFor example,\nWhen creating EC2 on AWS, it excells at provisioning VM with Infraresources.\n{img{asset/faq/general_001_en.jpg}50%}\nAs for the role divisions when the two softwares are linked, \nwe expect that many will use Terraform to construct servers and Ansible to deploy apps. \n\nAdditionaly, \nITA can feed information from system parameters to both Terraform and Ansible, enabling centralized management of system information without being bound by automation software.\n{img{asset/faq/general_002_en.jpg}100%}"},
"7":{"Q":"I want to join the Exastro Developer community as a commiter.","A":"You can join Exastro-Suite from Github. \n\nFor any issues or requests, please create an Issue.\nNew issues can be created by pressing the \"New Issue\" button in the following URLs.\n{a{https://github.com/exastro-suite/it-automation-docs/issues}For Documents :}\n{a{https://github.com/exastro-suite/it-automation/issues}For Code :}\nIf you want to modify the code after discussing it in the issue, please make a pull request to the target file linked with the issue.\nWhen doing so, please make sure to pull request on the latest version of the branch, not the master branch.\n"},
"8":{"Q":"How do I use Single Sign on? \nIs it only OAuth2? Is SAML Supported?","A":"SSO Authentification can only be used with OAuth2 and does not support SAML.\nFor more information regarding SSO, {a{https://exastro-suite.github.io/it-automation-docs/asset/Documents/Exastro-ITA_System_Configuration_Enviroment_Construcion_Guide_SSO(Single_Sign-On).pdf}please refer to this link:}"},
"9":{"Q":"(For Ver.1.4.1 and earlier)\nWhen I pre-upload files over 128 kbytes over SSL Connection, the file upload status gets stuck on \" Processing\". \nHow do I avoid this?","A":"Users can change the uppload limit size by changing one of the 2 settings below in the <VirtualHost *:443> settings in the Vhost Setting file (/etc/httpd/conf.d/vhosts_exastro-it-automation.conf)\n\n①Set SSLRenegBufferSize （F.eks.：SSLRenegBufferSize 4000000000）\n②Delete SSLCipherSuite（SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5:!SEED:!IDEA）"},
"10":{"Q":"I want to deny HTTP access and only allow HTTPS Access to Exastro IT Automation.","A":"Please follow the steps below to control/change HTTP/HTTPS access.\n\n1.Edit this file \"/etc/httpd/conf.d/vhosts_exastro-it-automation.conf\"\n ・To deny HTTP access, comment out (#) <VirtualHost *:80 > to </VirtualHost>.\n ・To deny HTTPS access, comment out (#) <VirtualHost *:443 > to </VirtualHost>.\n\n2. Restart Apache.\n\nFor more information, please refer to page 27 in {a{https://exastro-suite.github.io/it-automation-docs/asset/Learn/ITA-online-install_en.pdf}this document}."},
"11":{"Q":"Where can I go to learn more about using Exastro IT Automation?","A":"We have a wide variety of documents and guides on the \"{a{https://exastro-suite.github.io/it-automation-docs/learn.html}Learn Page}\" on the Community site.\nFor News regarding Exastro, please see the {a{https://exastro-suite.github.io/docs/newsroom.html}News room}.\nFor more detailed manuals on how to use the different functions, please see the {a{https://exastro-suite.github.io/it-automation-docs/documents.html}Document page}."},
"12":{"Q":"The process freezes if I try to upload a file with a size of over 128kb in advance when I am connected through HTTPS.","A":"This occurs when SSLCipherSuite is set in Apache's vhosts_exastro-it-automation.conf and SSLRenegBufferSize is not set.\nIf these are not set, Apache mod ssl's default value (128kb) will be used, henced the error.\nITA Version 1.5.0 and later does not use the default value, meaning that the error will not occur.\n\nIn order to fix this, users can change the maximum upload file size by doing one of the solutions below in the Vhost setting file's \"<VirtualHost*:443 >\" settings.\n\nFile ：/etc/httpd/conf.d/vhosts_exastro-it-automation.conf\n1.configure SSLRenegBufferSize. (E.g. SSLRenegBufferSize 4000000000)\n2. Delete SSLCipherSuite (E.g.SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5:!SEED:!IDEA)"},
"13":{"Q":"Are there any sample codes for me to use in order to access the Exastro IT Automation Machine interface (Rest API)?","A":"The sample codes can be downloaded from the following URLs.\n\n{a{https://github.com/exastro-suite/knowledges/blob/main/Exastro_IT_Automation%E3%82%92Excel%E3%81%8B%E3%82%89API%E3%81%A7%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8B%E3%82%B5%E3%83%B3%E3%83%97%E3%83%AB(VBA).zip}VBA version}\n{a{https://github.com/exastro-suite/knowledges/blob/main/RESTAPI%E3%82%B7%E3%82%A7%E3%83%AB.zip}Shell version}\n\nPlease see {ank{#ansible-q20}here} for the Ansible Playbook version."},
"14":{"Q":"What browser is recommended for using ITA?","A":"For information regarding different browsers and their requirements, please see Chapter \"1.2  Client Requirements\" in \"{a{https://github.com/exastro-suite/it-automation-docs/raw/master/asset/Documents/Exastro-ITA_System_Configuration_Environment_Construction_Guide_Basic.pdf}Exastro-ITA_System_Configuration_Environment_Construction_Guide_Basic}\" "},
"15":{"Q":"Where can I see the patch notes for each version?","A":"Please see changelog file,{a{https://github.com/exastro-suite/it-automation/blob/master/CHANGELOG_en.md}CHANGELOG_en.md}.\nSince the changelog is linked to issues, users can check the different issues for more detailed information regarding each change.\n\n▼issue\nhttps://github.com/exastro-suite/it-automation/issues/xxx（←Replace \"xxx\" with desired issue number）"}
},
"Install":{
"data":{"frequently":"","abbreviation":"","icon":"fa-download","id":"install"},
"1":{"Q":"Are any RDBMS other than MariaDB usable?","A":"MariaDB 10.3 or later can be used. Any other DBs are not guaranteed to work."},
"2":{"Q":"Can ITA be updated?\nAre there any restrictions? Are there any functions that stops working if I do so?","A":"ITA can be updated to a newer version if it is version 1.4.0 or later. \nAny ITA environments created from the All-In-One construction configuration can also be updated. \nFor details on how to update ITA, {a{https://exastro-suite.github.io/it-automation-docs/asset/Learn/ITA-version-up.pdf}please refer to this document:}"},
"3":{"Q":"Does the ITA All-in-One configuration Docker Containers support Kubernetes Autoscale/HA configurations?","A":"The Exastro IT Automation All-in-one configuration container image does not support Kubernetes autoscale configurations. therefore, make sure to only use 1 replica.\nIf the number of replicas are 2 or over, Maria DB will run in each of the Pods. However, since these Maria DBs are not linked, an mismatch error will occur.\n\nAdditionaly, if you want to build an HA configuration, \nyou need to separate MariaDB, data relay storage, and other components into separate containers, but at the time of this question, we do not support seperate containers.\nWe are currently planning to release Container images that supports Autoscaling and HA Configurations."}
},
"Management Console":{
"data":{"frequently":"","abbreviation":"","icon":"fa-user-cog","id":"management"},
"1":{"Q":"What kind of RBAC setting units can I use?","A":"For v1.6.0 and later, there are possible to configure RBAC in two different patterns. \"Menu unit RBAC\" and \"Record unit RBAC\".\n\nIf you set RBAC for Menus, it will count for the whole menu. \nIf you want to set RBAC for records within menus, use Record unit RBAC.\n\nFor more information regarding Record Unit RBAC, please refer to {a{https://exastro-suite.github.io/it-automation-docs/asset/Documents/Exastro-ITA_User_Instruction_Manual_Role-based_access_control_for_data_records.pdf}the following document}."}
},
"Export/Import":{
"data":{"frequently":"","abbreviation":"","icon":"fa-exchange-alt","id":"export-inport"},
"1":{"Q":"Can I use the ITA Export/Import function between different versions?","A":"The ITA Export/Import function can not be used to transfer data between ITA systems on different versions.\nIf you want to import to an ITA on a newer version, first create an ITA system with the same version as the ITA you want to import from.\nAfter you've imported, you can now update the ITA where the data got imported to.\n\n{a{https://exastro-suite.github.io/it-automation-docs/asset/Learn/ITA-version-up.pdf}Please see this document} for updating ITA.\n\n※Please note that system can only be updated to v1.5.0 or later, and that only systems on v1.4.0 or later can be updated."}
},
"Conductor/Symphony":{
"data":{"frequently":"","abbreviation":"","icon":"fa-random","id":"conductor-symphony"},
"1":{"Q":"What is the difference between Symphony and Conductor?","A":"Symphony is a function that allows users to combine multiple movements into job-flows and execute them in order. \nConductor is the supersedement of Symphony and can in addition do the following:  \n・Parallel execution: Execute multiple Movements at the same time. The amount of parallel executable Movements depends on the performance.\n・Calling conductor: It is possible to call in a different Conductor.\n・Appoint repair: It is possible to set all movements and such to be repaired after they`re finished."},
"2":{"Q":"What is an \"Operation\" and \"Symphony/Conductor\"?","A":"In ITA, we define the words as following:\nMovement: The smallest automated operation unit that ITA can create. A job.\nSymphony/Conductor: A jobflow made up by multiple Movements. When the first movement is finished, the next movement will automatically be executed. It is a very general procedure.\nFor information on the difference between Symphony and Conductor, please refer to FAQ Question 1 in the \"Conductor/Symphony\" section.\nOperation : A set of automated tasks created in ITA.\n{img{asset/faq/conductor_symphony_001_en.jpg}67%}\nAll information related to the Symphony/Conductor operations and devices are linked and managed.\n\nNote: Once a Symphony/Conductor is created, it can be used multiple times in different operations.\nFor example: \nThe two operations (For Christmas) and (For New Years) are different, but they both use the same symphony.\n{img{asset/faq/conductor_symphony_002_en.jpg}100%}"},
"3":{"Q":"How do I send data between Symphony movements?","A":"In Ansible or Ansible-Tower, files can be shared between each Movement by creating files under the Playbook's Symphony operation directory path.\nIt is possible to have the Operation Directory path be treated as an ITA Reservation variable \"__symphony_workflowdir__\".\nFor information on the Operation Directory Path, please refer to the \"Symphony\" Menu group -> \"Symphony Interface Information\" Menu.\n{img{asset/faq/symphony_001_en.PNG}70%}\n\nThe following is a sample code used in Ansible Legacy.\n\n[Sender]\n__{code{- name: API Execution\n  uri: \n    url: http://sample.com/\n    method: GET\n    status_code: 201\n  register: result\n  ignore_errors: yes\n\n- name: Data opening\n  local_action: \n    module: copy\n    dest: \"{{__symphony_workflowdir__}}/data\"\n    content: \"{{ result.content }}\"}playbook}__\n\n[Receiver]\n__{code{- name: Load Data\n  shell: \n    cat \"{{ __symphony_workflowdir__}}/data\"\n  register: data\n\n- debug: var=data}playbook}__"},
"4":{"Q":"How do I send data between Conductor movements?","A":"In Ansible or Ansible-Tower, files can be shared between each Movement by creating files under the Playbook's Conductor operation directory path.\nIt is possible to have the Operation Directory path be treated as an ITA Reservation variable \"__conductor_workflowdir__\".\nFor information on the Operation Directory Path, please refer to the \"Conductor\" Menu group -> \"Conductor Interface Information\" Menu.\n{img{asset/faq/condcutor_001_en.PNG}70%}\n\n[Sender]\n__{code{- name: API Execution\n  uri: \n    url: http://sample.com/\n    method: GET\n    status_code: 201\n  register: result\n  ignore_errors: yes\n\n- name: Data opening\n  local_action: \n    module: copy\n    dest: \"{{__conductor_workflowdir__}}/data\"\n    content: \"{{ result.content }}\"}playbook}__\n\n[Receiver]\n__{code{- name: Load data\n  shell: \n    cat \"{{ __conductor_workflowdir__}}/data\"\n  register: data\n\n- debug: var=data}playbook}__"}
},
"Menu creation":{
"data":{"frequently":"","abbreviation":"","icon":"fa-list","id":"create-menu"},
"1":{"Q":"The message below shows up when I`m trying to create a menu. What should I do?  \n\n\"The vertical menu information item number and repeted numbers are incorrect.\"","A":"Compare\nCreate Menu> Registered information in Menu item creation information\nand\nCreate Menu> Menu(vertical)`s creation information`s \"Menu Name\" \" Item Number\" and Information defined by the amount of repetitions\nand check if there are no errors or mistakes with the definition. "},
"2":{"Q":"What is the difference between Parameter sheets and Data sheets?","A":"Both Parameter sheets and data sheets can be freely designed with the \"Menu creation\" to include items such as \"Number of items\", \"Format\",\"Size\", \"Input restrictions\", etc.\n\nParameter sheets manages variable values of IaC.\nRecords in parameter sheets are created in \"Operation\" or \"Operation and Host\" units. \nThe items created in parameter sheets can automatically assign the entered values to IaC variables by linking them to IaC variables in the all the driver's \"Substitution value auto-registration setting\" menu.\n\nData sheets are used when you are managing data inside ITA.\nIt can also be used as a reference source for items that are selectable in pull-down menus in other parameter and datasheets. This prevents inconsistencies in wording and names.\n\n{img{asset/faq/create_menu_001_en.jpg}67%}"},
"3":{"Q":"When defining items in the Menu Create -> Define/Create Menu, the select items will not be displayed in the pulldown selection when choosing Pulldown selection as input method.","A":"The following can be thought of as the problem.\n\n1.The \"Required\" or \"Unique constraint\" box is not checked for the reference item.\nIf Menu A in the picture below is where it is will be refered to, and Menu B is where it is referenced from, if you want to have Item X from Menu B be displayed in Menu A as a \"Select item\", Item X must have its checkboxes for \"Required\" and \"Unique constraint\" checked.\n{img{asset/faq/create_menu_002_en.png}70%}\n\n2.One of the following is selected as input method from the reference item (The source item)\nWhen defining Item X in Menu B, make sure that one of these is selected for Input method: \" String\", \"Multi string\", \"Integer\" ,\"Decimal Number\", \"Time/Date\", \"Date\" or \"Link\".\n{img{asset/faq/create_menu_003_en.png}70%}"},
"4":{"Q":"The SQL error \"Row size too large\" displays when I try to make a menu.","A":"The error occurs because the capacity limit of the record has been reached due to MariaDB restrictions.\nAs an example, an error will occur if the number of columns is more than 344.\nReduce the number of columns or split the menu to keep it within capacity."},
"5":{"Q":"Can you use symbols when naming menus?","A":"Menu names cannot contain the following characters:\n「\\/:*?\"<>|[]：￥／＊［］」"}
},
"Host group management":{
"data":{"frequently":"","abbreviation":"","icon":"fa-server","id":"host-group"},
"1":{"Q":"What is host group?","A":"A host group is a Host group that gathers logical units (functions and roles).\nBy using the host group management function, it is possible to give work instructions to grouped hosts, making it easier to manage works in a large system environment with multiple hosts. \nAdditionaly, by defining a parent-child relationship in host groups, it is possible to set succeeding parameters from the parent to the child host groups. \n\nFor more information, check the Community site`s Learn page`s \"Exastro IT Automation Host group management・Menu creation\""}
},
"Ansible-driver":{
"data":{"frequently":"","abbreviation":"","icon":"fa-cog","id":"ansible"},
"1":{"Q":"How do I log in and set SSH in Windows server in Pioneer?","A":"Make the interaction file as below.\n・Without BOM\n・Make the code CRLF\n・Enclose the command being executed in windows with quotation marks and add \"\\r\" at the end.\n\nExample: Create a new directory in the Windows Server\n__{code{conf:\n  timeout: 10\nexec_list:\n  - expect: 'password:'\n    exec: XXXXXXXX\n  - expect: 'Administrator>'\n    exec: \"mkdir SSLtest_0525\\r\"\n  - expect: 'Administrator>'\n    exec: \"exit\\r\"}playbook}__"},
"2":{"Q":"What is the difference between File management and template management?","A":"File management is used to register files used in each module defined in a playbook. \nThe file materials are static files that uses copy and file modules.\n\nTemplate management is used to register files used in Template modules and such defined in Playbooks.\nFiles in Template management are written in a template language called Jinja2 and can dynamically create files, variables and conditional branches."},
"3":{"Q":"Why do I have to set the variables manually in Template management?","A":"(In the case of Ansible-Legacy and Ansible Pioneer)\nIf done in Ansible, an unexpected error will occur in ITA.\n\n(In the case of Ansible-LegacyRole)\nAnsible will be executed.\nIf the specific values in Default/Main.yml( or other files) are defined, those values will be executed. If not defined, an error will occur when those variables are being used."},
"4":{"Q":"If the variables inside a playbook (VAR_XXX) are executed without any specific values set to them, at what timing will an error occur?","A":"(In the case of Ansible-Legacy and Ansible Pioneer)\nIf done in Ansible, an unexpected error will occur in ITA.\n\n(In the case of Ansible-LegacyRole)\nAnsible will be executed.\nIf the specific values in Default/Main.yml( or other files) are defined, those values will be executed. If not defined, an error will occur when those variables are being used."},
"5":{"Q":"The specific values in Parameter sheets wont show correctly in the substitute value management menu when using the substitute value automatic registration.","A":"Check the definition information in the substitute value automatic register settings.\nAbiding the automatic registering settings,\nthe function that automatically register parameter sheets values into substitute values will not update if the last changer is any other function. "},
"6":{"Q":"I executed Legacy work to all the hosts set to users in Device list(expect for Root Users),\nbut an error occurs in the Ansible Command","A":"In the case of executing a ansible commando in ITA, set the default sudo parameters to \"yes\".\nSet Sudo authority to all the corresponding work target host users.\nIf you are unable to add Sudo Authority, add a sudo parameter setting in the playbook."},
"7":{"Q":"I executed work to the host set to telnet in Device list protocol, but an error occurs when connecting to the work target host.","A":"A common cause for errors is that the password in the file or in the password prompt is incorrect, so please make sure it is correct.\n\nAs an example,  Let`s write the expect module and the exec module to use the passwords below when connecting to telnet.\n△△-△expect:△’Password’\n△△△△exec:△itapassword\n※△=space\n\n(possible errors)\n・The password that should be put in Expect should be password, and not Password\n・The password was not itapassword"},
"8":{"Q":"I tried executing Orchestra work to a host with public key set as authentication method in the device list, but an error occurs when connecting to the target host.","A":"Please check if a public key is registered to the target host side in Ansible/AnsibleTower server`s .ss/known_hosts.\n\nLogging in with a corresponding host name or ip address in the ssh command from the server written above will register a public key."},
"9":{"Q":"I tried executing Orchestra work to a host with password authentication as authentication method in the device list, but an error occurs when connecting to the target host.","A":"Please check if password authorization is allowed in the SHH settings for the target host."},
"10":{"Q":"I specified the Host specification format in the Movement list and executed each orchestrator, but an error occurs when connecting to the target host.","A":"The following can be thought of being the problem.\n【1.The Name resolution is not available/ there is no Name resolution.】\nYou can either set up a Name resolution or specify an IP Address.\n・DNS Server-> Set an DNS Server (IP Address) to /etc/resolv.conf\n・Host File-> Insert the address resolution settings for the Host name to /etc/hosts\n\nIf you're specifying an IP Address, make sure that the Host specification format parameter is set to \"IP Address\" when registering in the Movement list.\n\n【２．Public key is not configured to the host name】\nIf SSH Connection is used, make sure that the public key for the target host side is registered in the \"known_hosts\" in the Ansible and AnsibleTower server with the corresponding host name."},
"11":{"Q":"the /tmp file shown in the playbook isnt created.","A":"The PrivateTmp fucntion is added from RHEL7. The Apache installed in ITA activates the PrivateTMP function. All playbook executions from ITA goes through Apache, so/tmp is bound to a different directory. It is therefore recommended that access to /tmp files from playbooks in ITA is refrained."},
"12":{"Q":"I cant connect to the Windows server from Ansible","A":"Open up Powershell as an administrator in the windows server and execute the command below\nC:\\User\\User> Enable-PSRemoting -Force\n↓\nC:\\User\\User> Set-NetConnectionProfile -InterfaceAlias (Get-NetConnectionProfile - IPv4Connectivity Internet).InterfaceAlias -NetworkCategory Private\n↓\nC:\\User\\User> winrm set winrm/config/service/auth '@{Basic=\"true\"}'\n↓\nC:\\User\\User> winrm set winrm/config/service '@{AllowUnencrypted=\"true\"}'\n\nIf you`re yousing Ansible-Legacy/Role, make sure the WinRM connection between device list and Movement list is enabled."},
"13":{"Q":"How do I make Role files(zip) for Ansible-Legacy Role mode?","A":"We explain the process of using Ansible Role files in Legacy role in the Learn page's {a{https://exastro-suite.github.io/it-automation-docs/asset/Learn/ITA-Ansible-Driver_en_practice.pdf}\"Exastro IT Automation Ansible Driver Practice\" document (Chapter 2, Ansible-LegacyRole)}. \nPlease see it for more information."},
"14":{"Q":"What is the difference between the 3 Ansible-Driver modes?","A":"The 3 Ansible-Driver modes have different use-cases and should be used accordingly. \n・Ansible Legacy Mode is good at reusing Playbooks.\n・Ansible-Legacy Role allows the user to use Ansible-Role.\n・Ansible Pioneer mode can handle various situations with the use of its original dialogue files.\n\nFor more information, please see the  {a{https://exastro-suite.github.io/it-automation-docs/asset/Learn/ITA-Ansible-Driver_lecture.pdf}\"Exastro IT Automation Ansible Driver Lecture\"} Document."},
"15":{"Q":"What is the different between ITA and Ansible Tower? How are the roles divided when both of them are used.","A":"The difference between AnsibleTower and ITA is as following.\nITA manages and gathers setting data.\nAnsible creates any config files and directories necessary to execute operations.\n\nAnsibleTower securely executes and communication between clusters and can control \ndifferent versions of Ansible Engine(The engine that executes Ansible Playbooks).\n\nCombining ITA, AnsibleTower and AnsibleEngine makes up an automatically constructed system that \ntakes advantage of the features of all the different modes.\n{img{asset/faq/ansible_001_en.jpg}100%}"},
"16":{"Q":"Is it possible to link multiple ITAs to one AnsibleTower?","A":"Yes. It is possible to link miltiple ITAs to one AnsibleTower. \nHowever, in order to avoid data conflicts, please make sure that the following settings are different for each ITA.\n\n1.Data storage path (For both Symphony and Conductor) \n\"Ansible Common\" menu → Interface Information\n Symphony Instance Data relay Storage path (Ansible)\n Conductor Instance Data relay storage path (Ansible)\n\n2. Ansible operation number\n\"Management Console\" menu → Sequence list.\n　C_ANSIBLE_LNS_EXE_INS_MNG_JSQ\n　C_ANSIBLE_LRL_EXE_INS_MNG_JSQ\n　C_ANSIBLE_PNS_EXE_INS_MNG_JSQ\n　C_SYMPHONY_INSTANCE_MNG_JSQ\n　C_CONDUCTOR_INSTANCE_MNG_JS"},
"17":{"Q":"How can I import information retrieved from Ansible or other systems into CMDB in Exastro?","A":"It is possible to use the \"Collect\" function to import information to CMDB.\nThe \"Collect\" function automatically registers values to the parameter sheet based on the results of previously executed Ansible operations in ITA (source files output in a specific format).\nYou can create parameter sheets and connect it to the source file in advance.\n\nFor more information regarding the Collect function, please click {a{https://exastro-suite.github.io/it-automation-docs/asset/Documents_ja/Exastro-ITA_%E5%88%A9%E7%94%A8%E6%89%8B%E9%A0%86%E3%83%9E%E3%83%8B%E3%83%A5%E3%82%A2%E3%83%AB_%E5%8F%8E%E9%9B%86%E6%A9%9F%E8%83%BD.pdf}here(Japanese only)}."},
"18":{"Q":"How can I acquire information from AWS?","A":"We recommend using Ansible's AWS module. \nAs an example, we've listed an example of a Playbook that acquires EC2 lists below. \n\n※It is possible to assign variables (VAR_○○○○) from Exastro IT Automation\n※{ank{#ansible-q20}By using Exastro IT Automation's API, it is possible to update/register the acquired information to Exastro IT Automation's Parameter sheet.}\n\n__{code{- name: get VM list\n  ec2_instance_info:\n    aws_access_key: \"{{ VAR_aws_access_key }}\"\n    aws_secret_key: \"{{ VAR_aws_secret_key }}\"\n    region: \"{{ VAR_region }}\"\n    validate_certs: no\n    filters:\n      \"tag:Name\": \"{{ VAR_tagName }}*\"\n      \"instance-state-name\": [ \"running\" ]\n  register: ec2_info_from_aws}playbook}__\n{ank{#ansible-q19}Refer to this link} for Azure."},
"19":{"Q":"How can I acquire information from Azure?","A":"We recommend installing the Azure module from \"Ansible-Collections\" and using it.\n\n【How to install Azure modules from Ansible-collections】\n{code{# curl https://raw.githubusercontent.com/ansible-collections/azure/dev/requirements-azure.txt > requirements-azure.txt\n# pip3 install -r requirements-azure.txt}command}\n\nAs an example, we've listed an example of a Playbook that acquires public IP address information below. \n※It is possible to assign variables (VAR_○○○○) from Exastro IT Automation\n※{ank{#ansible-q20}By using Exastro IT Automation's API, it is possible to update/register the acquired information to Exastro IT Automation's Parameter sheet.}\n\n__{code{- name: get Public IP Address info\n  azure_rm_publicipaddress_info:\n    subscription_id: \"{{ VAR_azure_subscription_id }}\"\n    tenant: \"{{ VAR_azure_tenant_id }}\"\n    client_id: \"{{ VAR_azure_client_id }}\"\n    secret: \"{{ VAR_azure_secret }}\"\n    cert_validation_mode: \"ignore\"\n    resource_group: \"{{ VAR_azure_resource_group }}\"\n  register: vm_info_from_azure}playbook}__\n{ank{#ansible-q18}Please see this link} for AWS."},
"20":{"Q":"I want to access Exastro IT Automation from Ansible Playbook.","A":"It is possible to use Exastro IT Automation's API in Ansible Playbook to access Exastro IT Automation. \n【Example】\n・Reference/Register/Update/Delete/Revive Parameter sheets etc.\n・Executing Conductor\n\nAs an example, we've listed a playbook that allows users to reference Exastro IT AUtomation's \"Device list\". \n※For \"VAR_exastro_user_pswd_base64\", use the Exastro IT Automation Username/password to set the encoded value of the \"user:password\" string.\n\n__{code{- name: Refer \"Device list\"\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100000303\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ VAR_exastro_user_pswd_base64 }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"FILTER\"\n    body_format: json\n    body:\n      \"1\":\n        \"NORMAL\": \"0\"\n  register: device_list_from_exastro}playbook}__\n\nPlease see {ank{#general-q13}here} for the VBA and Shell version."},
"21":{"Q":"What are the default header section settings?","A":"The default header section is as follows.\n\nIf the header section in the Movement list registration screen (in the Ansible-driver menu) is blank, the following will be automatically configured.\n\nIf you want to change the settings, please enter the following text in to the header field and rewrite the places you want to change.\n__{code{- hosts: all\n  remote_user: \"{{ __loginuser__ }} \"\n  gather_facts: no\n  become: yes}playbook}__"},
"22":{"Q":"How is the priority of Ansible-LegacyRole's Default/main.yml, itareadme and Parameter sheets? ","A":"For more information regarding the Parameter priorities, please see the following chapters in the {a{https://exastro-suite.github.io/it-automation-docs/asset/Documents/Exastro-ITA_User_Instruction_Manual_Ansible-driver.pdf}Ansible Driver user instruction manual}.\n・Role package list (Ansible-Legacy Role)\n・Describe ITA readme and Substitution table (Ansible-Legacy Role only)"},
"23":{"Q":"A Python warning message gets displayed in the error log when running an operation.","A":"The ITA Installer installs the necessary python packages in order to use Ansible, but if the dependance relationship of the Python module and a part of the OS breaks or is failing, the following warning messages will be output when running an operation.\n\nThe following python package are installed by the ITA Installer.\n{cmd{・pexpect pywinrm boto3 paramiko boto}command}\n\nOutput warning message.\n{cmd{/usr/lib/python3.6/site-packages/requests/__init__.py:91: \n　RequestsDependencyWarning: urllib3 (1.26.4) or chardet (3.0.4) doesn't match a supported version!\n　RequestsDependencyWarning)}command}\n\nIf this warning message gets output, follow steps 1-5 to fix the Python module dependance.\n\n1.Install the command ,\"pipdeptree\" that checks the Python module dependancy.\n# pip install pipdeptree\n\n2.Use the \"pipdeptree\" command do check the Python package's dependancy\n# pipdeptree\n\n3.Check the dependancy\nurllib has dependancy with boto3 and pywinrm, but since it contradicts with the version it is expecting, Python outputs a warning that the urllib3 url is not within the range of what is expected in the pywinrm dependency requirements.\n・boto3:     - urllib3 [required: >=1.25.4,<1.27, installed: 1.26.4]\n・pywinrm:   - urllib3 [required: >=1.21.1,<1.25, installed: 1.26.4]\n\nDependencies output by pipdeptree(excerpt.)\n{cmd{　Warning!!! Possibly conflicting dependencies found:\n　* requests==2.20.0\n　 - urllib3 [required: >=1.21.1,<1.25, installed: 1.26.4]\n　-------------------------------------------------------------------\n　boto3==1.17.53\n　  - s3transfer [required: >=0.3.0,<0.4.0, installed: 0.3.7]\n　    - botocore [required: >=1.12.36,<2.0a.0, installed: 1.20.53]\n　      - jmespath [required: >=0.7.1,<1.0.0, installed: 0.10.0]\n　      - python-dateutil [required: >=2.1,<3.0.0, installed: 2.6.1]\n　        - six [required: >=1.5, installed: 1.11.0]\n　      - urllib3 [required: >=1.25.4,<1.27, installed: 1.26.4]\n　pywinrm==0.4.1\n　    - requests [required: >=2.0.0, installed: 2.20.0]\n　      - chardet [required: >=3.0.2,<3.1.0, installed: 3.0.4]\n　      - idna [required: >=2.5,<2.8, installed: 2.5]\n　      - urllib3 [required: >=1.21.1,<1.25, installed: 1.26.4]}command}\n\n4.Recover the dependency with the \"pip\" command.\nUpgrade the Requests.\n# pip install --upgrade requests\n\n5. Use the \"pipdeptree\" command again to check the python package dependancy.\nBy upgrading the requests, both urllib3 will have its version corrected to the one expected by boto3 and pywinrm.\n・boto3:     - urllib3 [required: >=1.25.4,<1.27, installed: 1.26.4]\n・pywinrm:   - urllib3 [required: >=1.21.1,<1.27, installed: 1.26.4]\n\nDependencies output by pipdeptree(excerpt.)\n{cmd{　boto3==1.17.53\n　 - s3transfer [required: >=0.3.0,<0.4.0, installed: 0.3.7]\n　    - botocore [required: >=1.12.36,<2.0a.0, installed: 1.20.53]\n　      - jmespath [required: >=0.7.1,<1.0.0, installed: 0.10.0]\n　      - python-dateutil [required: >=2.1,<3.0.0, installed: 2.6.1]\n　        - six [required: >=1.5, installed: 1.11.0]\n　      - urllib3 [required: >=1.25.4,<1.27, installed: 1.26.4]\n　pywinrm==0.4.1\n　    - requests [required: >=2.0.0, installed: 2.25.1]\n　      - certifi [required: >=2017.4.17, installed: 2020.12.5]\n　      - chardet [required: >=3.0.2,<5, installed: 3.0.4]\n　      - idna [required: >=2.5,<3, installed: 2.5]\n　      - urllib3 [required: >=1.21.1,<1.27, installed: 1.26.4]}command}"},
"24":{"Q":"I linked a parameter sheet with the value \"YES\" to Ansible-Driver and input a substitute value to the Playbook Variable, but when running Ansible, it gets recognized as True, meaning that I cannot use YES for String.","A":"\"YES\" is an Ansible specification and will be automatically changed to True (boolean).\nTherefore, you cannot use it as a String.\n\nThe following will be changed to \"True/False\", irregardless of capitallized and small letters.\n-----\nYES/NO\nON/OFF\n-----\n\nIf you want to use YES or NO for Strings, enclose YES in double or single quotations for the item in the corresponding parameter sheet."},
"25":{"Q":"Is there a sample code for the Collect Function?","A":"The sample code below is a playbook that collects the OS device information using Ansible's \"Gather Facts\". \n\nIn order to enable Gather Facts, Please do so in the Header section of the registration screen in the \"Ansible-Driver\" Menu group-> \"Movement list\" Menu's Registration screen.\nFor more information regarding the Header section, {ank{#ansible-q21}please see here}.\n\nBy linking the variables in the YAML file created in the Playbook with the items in the parameter sheet prepared in advance from the \"Collect item Value list\",\nthe collected values can be registered in the parameter sheet.\n\n__{code{- name: make directory\n  file:\n    path: \"{{ __workflowdir__ }}/../_parameters/{{ inventory_hostname }}\"\n    state: directory\n    recurse: yes\n  delegate_to: localhost\n\n- name: make yaml file\n  blockinfile:\n    create: yes\n    mode: 644\n    insertbefore: EOF\n    marker: \"\"\n    dest: \"{{ __workflowdir__ }}/../_parameters/{{ inventory_hostname }}/hogehoge.yml\"\n    content: |\n      ansible_architecture: {{ ansible_architecture }}\n      ansible_bios_version: {{ ansible_bios_version }}\n      ansible_default_ipv4__address: {{ ansible_default_ipv4.address }}\n      ansible_default_ipv4__interface: {{ ansible_default_ipv4.interface }}\n      ansible_default_ipv4__network: {{ ansible_default_ipv4.network }}\n      ansible_distribution: {{ ansible_distribution }}\n      ansible_distribution_file_path: {{ ansible_distribution_file_path }}\n      ansible_distribution_file_variety: {{ ansible_distribution_file_variety }}\n      ansible_distribution_major_version: {{ ansible_distribution_major_version }}\n      ansible_distribution_release: {{ ansible_distribution_release }}\n      ansible_distribution_version: {{ ansible_distribution_version }}\n      ansible_machine: {{ ansible_machine }}\n      ansible_memtotal_mb: {{ ansible_memtotal_mb }}\n      ansible_nodename: {{ ansible_nodename }}\n      ansible_os_family: {{ ansible_os_family }}\n      ansible_pkg_mgr: {{ ansible_pkg_mgr }}\n      ansible_processor_cores: {{ ansible_processor_cores }}\n      ansible_processor_count: {{ ansible_processor_count }}\n      ansible_processor_nproc: {{ ansible_processor_nproc }}\n      ansible_processor_threads_per_core: {{ ansible_processor_threads_per_core }}\n      ansible_processor_vcpus: {{ ansible_processor_vcpus }}\n      ansible_product_name: {{ ansible_product_name }}\n      ansible_product_serial: {{ ansible_product_serial }}\n      ansible_product_uuid: {{ ansible_product_uuid }}\n      ansible_product_version: {{ ansible_product_version }}\n      ansible_python__executable: {{ ansible_python.executable }}\n      ansible_python_version: {{ ansible_python_version }}\n      ansible_service_mgr: {{ ansible_service_mgr }}\n  delegate_to: localhost}playbook}__"},
"26":{"Q":"Something goes wrong when I try to upload Playbook files.","A":"There might be something wrong with the contents of the Playbook.\nPlease see the points below.\n\n・The character code must be set to \"UTF-8 Without BOM\".\n・The file extension must be \"YAML\" format.\n・The indents inside the Playbook file are doubled.\n\nFor more information regarding the coding format for Playbooks, please see the official Ansible manual."},
"27":{"Q":"I want to automate the process of creating and configuring a VM. Is it possible to automate that process without knowing information such as the VM IP Address?","A":"Yes, we can do so by configuring the settings to a host group.\nAfter the VM has been paid out, execute a Playbook that gathers the VM list and registers it to the \"Device list\" and \"Host group list\" in ITA. By configuring the registered Host group, we can automate the rest of the process without known ing the IP Address.\n{img{asset/faq/ansible_002_en.PNG}50%}\n\nWe have included a sample code that gathers AWS EC2 list and registers it to ITA.\n\nCreate a conductor that contains the following sample code(Conductor①) and a conductor that contains the settings you want to set to the vm (Conductor②). Then, use the Conductor Call function to call the two Conductors to a new Conductor.\nAs long as Conductor① adds machines to the host group, Conductor② can use that host group to configure settings to the machine.\n*Reading the VM List and adding it to the ITA CMDB might take a little time.\n\nAcquiring EC2 list\nThis playbook gathers EC2 lists and saves it to the Conductor operation directory.\n__{code{- name: get VM list\n  ec2_instance_info:\n    aws_access_key: \"{{ VAR_aws_access_key }}\"\n    aws_secret_key: \"{{ VAR_aws_secret_key }}\"\n    region: \"{{ VAR_region }}\"\n    validate_certs: no\n    filters:\n      \"tag:Name\": \"{{ VAR_tagName }}*\"\n      \"instance-state-name\": [ \"running\" ]\n  register: ec2_info_from_aws\n\n- name: output VM list\n  local_action:\n    module: copy\n    content: \"{{ ec2_info_from_aws.instances }}\"\n    dest: \"{{ __conductor_workflowdir__ }}/{{ VAR_VMListFileName }}\"}playbook}__\n\n\nReads the EC2 list saved in the Conductor operation directory \nand registers the data to the Device list(You can also delete/update data already in the list)\n__{code{- name: Load \"VM List file\"\n  local_action: shell cat \"{{ __conductor_workflowdir__ }}/{{ VAR_VMListFileName }}\"\n  register: responce\n\n- name: Format the loaded data (JSON)\n  set_fact:\n    vm_info_from_file: \"{{ responce.stdout | from_json }}\"\n\n- name: Generate the authorization needed to access Exastro IT Automation\n  command: echo \"{{ VAR_exastro_user }}:{{ VAR_exastro_pswd }}\"\n  register: user_n_account\n\n- name: Gather data from the \"Device list\" menu (Search condition: Host group name)\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100000303\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"FILTER\"\n    body_format: json\n    body:\n      \"1\":\n        \"NORMAL\": \"0\"\n      \"28\":\n        \"NORMAL\": \"Host group：{{ VAR_hostgroup_name }}\"\n  register: device_list_from_exastro\n\n- name: Extract record information from the gathered data.\n  set_fact:\n    device_list_from_exastro_body: \"{{ device_list_from_exastro.json.resultdata.CONTENTS.BODY }}\"\n\n- name: Abolish any data that exists in the \"Device list\" but that doesnt exist in the \"VM List file\"\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100000303\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"EDIT\"\n    body_format: json\n    body:\n      \"0\":\n        \"0\": \"abolish\"\n        \"2\": \"{{ item.2 }}\"\n        \"30\": \"{{ item.30 }}\"\n  when:\n    - item.0 == None\n    - vm_info_from_file | map(attribute='public_dns_name') | list | select('match', item.4) | length == 0\n  with_items:\n    - \"{{ device_list_from_exastro_body }}\"\n\n- name: Update if the device exists in both the \"Device list\" and \"VM List file\" with IP Addresses that does not match.\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100000303\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"EDIT\"\n    body_format: json\n    body:\n      \"0\":\n        \"0\": \"Update\"\n        \"2\": \"{{ item.2 }}\"\n        \"4\": \"{{ item.4 }}\"\n        \"5\": \"{{ vm_info_from_file | selectattr('public_dns_name', '==', item.4) | map(attribute='public_ip_address') | join() }}\"\n        \"20\": \"{{ item.20 }}\"\n        \"30\": \"{{ item.30 }}\"\n  when:\n    - item.0 == None\n    - vm_info_from_file | map(attribute='public_dns_name') | list | select('match', item.4) | length == 1\n    - vm_info_from_file | selectattr('public_dns_name', '==', item.4) | map(attribute='public_ip_address') | join() != item.5\n  with_items:\n    - \"{{ device_list_from_exastro_body }}\"\n\n- name: Extract Host name from the \"Device list\" and lists it (Including the title)\n  set_fact:\n    host_name: \"{{ item.4 }}\"\n  register: device_list_from_exastro_hostnames\n  with_items:\n    - \"{{ device_list_from_exastro_body }}\"\nRegister data that exists in the \"VM list file\" but not in the \"Device list\"\n- name: Register data that exists in the \"VM list file\" but not in the \"Device list\"\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100000303\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"EDIT\"\n    body_format: json\n    body:\n      \"0\":\n        \"0\": \"Register\"\n        \"3\": \"SV\"\n        \"4\": \"{{ item.0 }}\"\n        \"5\": \"{{ item.1 }}\"\n        \"8\": \"{{ VAR_vm_user }}\"\n        \"11\": \"{{ VAR_keypair_name }}\"\n        \"12\": \"Key Authentication\"\n        \"20\": \"machine\"\n        \"28\": \"Host group：{{ VAR_hostgroup_name }}\"\n      \"UPLOAD_FILE\":\n        \"0\":\n          \"11\": \"{{ VAR_keypair_contents }}\"\n  when:\n    - device_list_from_exastro_hostnames.results | map(attribute='ansible_facts.host_name') | list | select('match', item.0) | length == 0\n  with_together:\n    - \"{{ vm_info_from_file | map(attribute='public_dns_name') | list }}\"\n    - \"{{ vm_info_from_file | map(attribute='public_ip_address') | list }}\"}playbook}__\n\n\nReads the EC2 list saved in the Conductor operation directory \nand registers the data to the Host group list(You can also delete/update data already in the list)\n__{code{- name: Load \"VM List file\"\n  local_action: shell cat \"{{ __conductor_workflowdir__ }}/{{ VAR_VMListFileName }}\"\n  register: responce\n\n- name: Format the loaded data (JSON)\n  set_fact:\n    vm_info_from_file: \"{{ responce.stdout | from_json }}\"\n\n- name:  Generate the authorization needed to access Exastro IT Automation\n  command: echo \"{{ VAR_exastro_user }}:{{ VAR_exastro_pswd }}\"\n  register: user_n_account\n\n- name: Gather data from the \"Host group\" menu (Search condition: Host group name)\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100170003\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"FILTER\"\n    body_format: json\n    body:\n      \"1\":\n        \"NORMAL\": \"0\"\n      \"3\":\n        \"NORMAL\": \"{{ VAR_hostgroup_name }}\"\n  register: host_link_list_from_exastro\n\n- name: Extract record information from the gathered data.\n  set_fact:\n    host_link_list_from_exastro_body: \"{{ host_link_list_from_exastro.json.resultdata.CONTENTS.BODY }}\"\n\n- name: Abolish any data that exists in the \"Host link list\" but that doesnt exist in the \"VM List file\"\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100170003\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"EDIT\"\n    body_format: json\n    body:\n      \"0\":\n        \"0\": \"Abolish\"\n        \"2\": \"{{ item.2 }}\"\n        \"9\": \"{{ item.9 }}\"\n  when:\n    - item.0 == None\n    - vm_info_from_file | map(attribute='public_dns_name') | list | select('match', item.5) | length == 0\n  with_items:\n    - \"{{ host_link_list_from_exastro_body }}\"\n\n- name: Extract Host name from the \"Host link list\" and lists it (Including the title)\n  set_fact:\n    host_name: \"{{ item.5 }}\"\n  register: host_link_list_from_exastro_hostnames\n  with_items:\n    - \"{{ host_link_list_from_exastro_body }}\"\n\n- name: Register data that exists in the \"VM list file\" but not in the \"VM Link list\"\n  uri:\n    url: \"https://{{ __loginhostname__ }}/default/menu/07_rest_api_ver1.php?no=2100170003\"\n    validate_certs: no\n    method: POST\n    headers:\n      Host: \"{{ __loginhostname__ }}:443\"\n      Authorization: \"{{ user_n_account.stdout | string | b64encode }}\"\n      Content-Type: \"application/json\"\n      X-Command: \"EDIT\"\n    body_format: json\n    body:\n      \"0\":\n        \"0\": \"Register\"\n        \"3\": \"{{ VAR_hostgroup_name }}\"\n        \"5\": \"{{ item }}\"\n  when:\n    - host_link_list_from_exastro_hostnames.results | map(attribute='ansible_facts.host_name') | list | select('match', item) | length == 0\n  with_items:\n    - \"{{ vm_info_from_file | map(attribute='public_dns_name') | list }}\"}playbook}__"},
"28":{"Q":"Ansible-Legacy's Automatic Substitute registration is taking too long. How do I fix this?","A":"You can speed up the run cycle by shortening the \"legacy automatic registration settings\".\n\nIn order to do so, follow the steps below:\n【Guide】\n①Use SSH to log in to the ITA Server\n\n②Update the file\nFile path：/usr/lib/systemd/system/ky_legacy_varsautolistup-workflow.service\nWhere to update:　Please update the area marked with red.　The smallest unit is 1 second.\n{cmd{[Unit]\nDescription=ky_legacy_varsautolistup-workflow\nAfter=syslog.target network.target mysqld.service\n\n[Service]\nEnvironmentFile=/etc/sysconfig/ita_env\nExecStart=/bin/sh ${ITA_ROOT_DIR}/backyards/common/ky_loopcall-php-procedure.sh /bin/php /bin/php ${ITA_ROOT_DIR}/back\nyards/ansible_driver/ky_legacy_varsautolistup-workflow.php ${ITA_ROOT_DIR}/logs/backyardlogs {color{10}#FF0000} ${ITA_LOG_LEVEL} > /de\nv/null 2>&1\nExecReload=/bin/kill -HUP $MAINPID\nExecStop=/bin/kill $MAINPID\n\n[Install]\nWantedBy=multi-user.target}command}\n\n③Restart the service\nRestart this process:\"ky_legacy_varsautolistup-workflow.service\"\n※Please note that the lower time set, the bigger load it will be on the server."},
"29":{"Q":"Can I make the Ansible log output more detailed information?","A":"Yes, it you can change the levels of information you want the log to output.\n\nIn order to do so, go to the \"Ansible Common\" Menu -> \"Interface information\". There you can see that the record's \"Option parameter\" collumn is displayed. The default value is \"-v\", so if you want more information, please change it to \"-vvv\"."}
},
"Terraform-driver":{
"data":{"frequently":"","abbreviation":"","icon":"fa-cog","id":"terraform"},
"1":{"Q":"The following error appears in the log when running Terraform driver operations.","A":"You may have set the wrong token type for \"User Token\" in \"Interface Information\".\nThere are three types of tokens that can be issued from Terraform: \"User Token\", \"Team Token\", and \"Organization Token\", but the only token that can be used by ITA is \"User Token\".\nUse the token issued from the Terraform administrator screen by following the steps below.\nClick [User Settings] > [Tokens] > [Create an API token]."}
},
"Documents":{
"data":{"frequently":"","abbreviation":"","icon":"fa-file","id":"documents"},
"1":{"Q":"I want to see documents for earlier versions.","A":"Please see the following URLs for earlier documents.\n (Change the \"vx.x.x\" in the URL with the version you want to see)\n\nJapanese:https: //github.com/exastro-suite/it-automation-docs/tree/vx.x.x/asset/Documents_ja\nEnglish: https://github.com/exastro-suite/it-automation-docs/tree/vx.x.x/asset/Documents"}
}
}
}